<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><script async src="https://www.googletagmanager.com/gtag/js?id=G-4RBSV11VTH"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-4RBSV11VTH")</script><title>第六章 Centos 7 Linux配置web 实训任务：Apache服务器部署 | 叶泯希·杂七杂八的🐕窝</title><link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="/favicon.ico"><link rel="stylesheet" href="https://at.alicdn.com/t/font_1911880_c1nvbyezg17.css"><link href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet"><link href="/js/swiper/swiper@5.4.1.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/animate.min.css"><link rel="stylesheet" href="/css/style.css"><link href="https://unpkg.com/@fancyapps/ui@5.0/dist/fancybox/fancybox.css" rel="stylesheet"><link rel="stylesheet" href="/js/shareJs/share.min.css"><style>@media (max-width:992px){#waifu{display:none}}</style><script defer src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><script src="https://unpkg.com/jquery@3.5.1/dist/jquery.min.js"></script><script src="https://unpkg.com/vue@2.6.11/dist/vue.min.js"></script><meta name="keywords" content="叶泯希,yeminxi,博客,blog,Hexo,叶泯希博客,yeminxiblog,叶泯,yemin,叶泯博客,yeminblog,泯希，minxi,泯希博客,minxiblog"><meta name="description" content="叶泯希的个人博客,yeminxiblog"><meta name="google-site-verification" content="3ZuWaT9VtyIMszQjBZEm6YNAKoYMcZJJMhBfze3Z4qs"><meta name="baidu-site-verification" content="codeva-mWL2UQNIMt"><link href="/css/custom.css" rel="stylesheet"><link href="/css/music.min.css" rel="stylesheet"><script defer data-pjax src="/js/jz.min.js"></script><script src="/js/snow.min.js"></script><script src="/js/random.js"></script><meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="叶泯希·杂七杂八的🐕窝" type="application/atom+xml"></head><div class="preloader-1" id="loader"><div aria-label="Orange and tan hamster running in a metal wheel" role="img" class="wheel-and-hamster"><div class="wheel"></div><div class="hamster"><div class="hamster__body"><div class="hamster__head"><div class="hamster__ear"></div><div class="hamster__eye"></div><div class="hamster__nose"></div></div><div class="hamster__limb hamster__limb--fr"></div><div class="hamster__limb hamster__limb--fl"></div><div class="hamster__limb hamster__limb--br"></div><div class="hamster__limb hamster__limb--bl"></div><div class="hamster__tail"></div></div></div><div class="spoke"></div></div></div><script>var endLoading=function(){document.body.style.overflow="auto",document.getElementById("loader").classList.add("loaded")};window.addEventListener("DOMContentLoaded",endLoading)</script><body><script defer>let isDark = JSON.parse(localStorage.getItem('dark')) || JSON.parse('false');

  if (isDark) {
    $(document.body).addClass('darkModel');
  }</script><script>function loadScript(src, cb) {
    return new Promise(resolve => {
      setTimeout(function () {
        var HEAD = document.getElementsByTagName("head")[0] || document.documentElement;
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        if (cb) {
          if (JSON.stringify(cb)) {
            for (let p in cb) {
              if (p == "onload") {
                script[p] = () => {
                  cb[p]()
                  resolve()
                }
              } else {
                script[p] = cb[p]
                script.onload = resolve
              }
            }
          } else {
            script.onload = () => {
              cb()
              resolve()
            };
          }
        } else {
          script.onload = resolve
        }
        script.setAttribute("src", src);
        HEAD.appendChild(script);
      });
    });
  }

  //https://github.com/filamentgroup/loadCSS
  var loadCSS = function (src) {
    return new Promise(resolve => {
      setTimeout(function () {
        var link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = src;
        link.onload = resolve;
        document.getElementsByTagName("head")[0].appendChild(link);
      });
    });
  };</script><script src="/js/swiper/swiper.min.js"></script><script src="/js/swiper/vue-awesome-swiper.js"></script><script src="/js/swiper/swiper.animate1.0.3.min.js"></script><script>Vue.use(window.VueAwesomeSwiper)</script><script src="/js/vue-typed-js/index.js"></script><script src="/js/vue-seamless-scroll/index.js"></script><script src="https://unpkg.com/typed.js@2.0.11"></script><div id="safearea"><main class="main" id="pjax-container"><header class="header" id="navHeader" style="position:fixed;left:0;top:0;z-index:10;width:100%"><div class="header-content"><div class="bars"><div id="appDrawer" class="sidebar-image"><div class="drawer-box-icon"><i class="fas fa-bars" aria-hidden="true" @click="showDialogDrawer"></i></div><transition name="fade"><div class="drawer-box_mask" v-cloak style="display:none" v-show="visible" @click.self="cancelDialogDrawer"></div></transition><div class="drawer-box" :class="{'active': visible}"><div class="drawer-box-head bg-color"><img class="drawer-box-head_logo lazyload placeholder" src="/images/avatar.webp" class="lazyload placeholder" data-srcset="/images/avatar.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="logo"><h3 class="drawer-box-head_title">叶泯希·杂七杂八的🐕窝</h3><h5 class="drawer-box-head_desc">叶泯希的个人博客,yeminxiblog</h5></div><div class="drawer-box-content"><ul class="drawer-box-content_menu"><li class="drawer-box-content_item" style="position:relative"><a href="/love" class="drawer-menu-item-link"><i class="iconfont icon-aiqingniao" aria-hidden="true"></i> <span class="name">朝暮</span></a></li><li class="drawer-box-content_item" style="position:relative"><a href="/" class="drawer-menu-item-link"><i class="fas fa-home" aria-hidden="true"></i> <span class="name">首页</span></a></li><li class="drawer-box-content_item" style="position:relative"><a href="javascript:;" class="drawer-menu-item-link has-children" @click="openOrCloseMenu(2)"><span><i class="iconfont icon-Trainfreeicon"></i> <span class="name">开往</span></span><i class="fas fa-chevron-left arrow" :class="{'icon-rotate': isOpen(2)}" aria-hidden="true"></i></a><ul class="drawer-sub-menu" v-if="isOpen(2)"><li><a href="javascript:toRandomPost()"><i class="iconfont icon-suijishushengcheng" style="margin-top:-20px"></i> <span>随机一篇文章</span></a></li><li><a target="_blank" rel="noopener" href="https://storeweb.cn/s/2141"><i class="iconfont icon-method-draw-image" style="margin-top:-20px"></i> <span>个站商店虫洞</span></a></li></ul></li><li class="drawer-box-content_item" style="position:relative"><a href="javascript:;" class="drawer-menu-item-link has-children" @click="openOrCloseMenu(3)"><span><i class="iconfont icon-youlian"></i> <span class="name">友链</span></span><i class="fas fa-chevron-left arrow" :class="{'icon-rotate': isOpen(3)}" aria-hidden="true"></i></a><ul class="drawer-sub-menu" v-if="isOpen(3)"><li><a href="/links"><i class="iconfont icon-pengyouquan" style="margin-top:-20px"></i> <span>伙伴</span></a></li><li><a href="/comments"><i class="iconfont icon-liuyanban" style="margin-top:-20px"></i> <span>留言</span></a></li></ul></li><li class="drawer-box-content_item" style="position:relative"><a href="javascript:;" class="drawer-menu-item-link has-children" @click="openOrCloseMenu(4)"><span><i class="iconfont iconfont icon-shijianxian"></i> <span class="name">文章</span></span><i class="fas fa-chevron-left arrow" :class="{'icon-rotate': isOpen(4)}" aria-hidden="true"></i></a><ul class="drawer-sub-menu" v-if="isOpen(4)"><li><a href="/archives"><i class="fas fa-archive" style="margin-top:-20px"></i> <span>归档</span></a></li><li><a href="/tags"><i class="fas fa-tags" style="margin-top:-20px"></i> <span>标签</span></a></li><li><a href="/categories"><i class="fas fa-bookmark" style="margin-top:-20px"></i> <span>分类</span></a></li></ul></li><li class="drawer-box-content_item" style="position:relative"><a href="javascript:;" class="drawer-menu-item-link has-children" @click="openOrCloseMenu(5)"><span><i class="iconfont icon-yule"></i> <span class="name">我的</span></span><i class="fas fa-chevron-left arrow" :class="{'icon-rotate': isOpen(5)}" aria-hidden="true"></i></a><ul class="drawer-sub-menu" v-if="isOpen(5)"><li><a href="/bangumis"><i class="iconfont icon-fanju1" style="margin-top:-20px"></i> <span>追番</span></a></li><li><a href="/cinemas"><i class="iconfont icon-dianying" style="margin-top:-20px"></i> <span>追剧</span></a></li><li><a href="/music"><i class="iconfont icon-a-discbox" style="margin-top:-20px"></i> <span>音乐</span></a></li><li><a href="/gallery"><i class="iconfont icon-tuku" style="margin-top:-20px"></i> <span>图库</span></a></li></ul></li><li class="drawer-box-content_item" style="position:relative"><a href="javascript:;" class="drawer-menu-item-link has-children" @click="openOrCloseMenu(6)"><span><i class="iconfont icon-gengduo"></i> <span class="name">更多</span></span><i class="fas fa-chevron-left arrow" :class="{'icon-rotate': isOpen(6)}" aria-hidden="true"></i></a><ul class="drawer-sub-menu" v-if="isOpen(6)"><li><a href="/about"><i class="iconfont icon-guanyuwo" style="margin-top:-20px"></i> <span>关于我</span></a></li><li><a href="/wang"><i class="iconfont icon-dog" style="margin-top:-20px"></i> <span>汪汪汪~</span></a></li></ul></li><li class="drawer-box-content_item" style="position:relative"><a href="javascript:;" class="drawer-menu-item-link has-children" @click="openOrCloseMenu(7)"><span><i class="fas fa-link"></i> <span class="name">镜像</span></span><i class="fas fa-chevron-left arrow" :class="{'icon-rotate': isOpen(7)}" aria-hidden="true"></i></a><ul class="drawer-sub-menu" v-if="isOpen(7)"><li><a href="https://yeminxi.github.io"><i class="iconfont icon-github" style="margin-top:-20px"></i> <span>GitHub 主站</span></a></li><li><a target="_blank" rel="noopener" href="https://yeminxi.vercel.app/"><i class="fab fa-vimeo" style="margin-top:-20px"></i> <span>Vercel 镜像站</span></a></li><li><a target="_blank" rel="noopener" href="https://r.ymx.us.kg/"><i class="fas fa-registered" style="margin-top:-20px"></i> <span>Render镜像站</span></a></li><li><a target="_blank" rel="noopener" href="https://www.ymx.us.kg/"><i class="iconfont icon-cloudflare" style="margin-top:-20px"></i> <span>Cloud 镜像站</span></a></li></ul></li><li class="drawer-box-content_item"><a target="_blank" rel="noopener" href="https://github.com/yeminxi"><i class="fas fa-github" aria-hidden="true"></i> <span>Github</span></a></li></ul></div></div></div><script>var body = document.body || document.documentElement || window;
  var vm = new Vue({
    el: '#appDrawer',
    data: {
      visible: false,
      top: 0,
      openArr: [],
    },
    computed: {
    },
    mounted() {
    },
    methods: {
      isOpen(index) {
        if (this.openArr.includes(index)) {
          return true;
        } else {
          return false;
        }
      },
      openOrCloseMenu(curIndex) {
        const index = this.openArr.indexOf(curIndex);
        if (index !== -1) {
          this.openArr.splice(index, 1);
        } else {
          this.openArr.push(curIndex);
        }
      },
      showDialogDrawer() {
        this.visible = true;
        // 防止页面滚动，只能让弹框滚动
        this.top = $(document).scrollTop()
        body.style.cssText = 'width: 100%; height: 100%;overflow: hidden;';
      },
      cancelDialogDrawer() {
        this.visible = false;
        body.removeAttribute('style');
        $(document).scrollTop(this.top)
      }
    },
    created() {}
  })</script></div><div class="blog-title" id="author-avatar"><div class="avatar"><img src="/images/avatar.webp" class="lazyload placeholder" data-srcset="/images/avatar.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="logo"></div><a href="/" class="logo">叶泯希·杂七杂八的🐕窝</a></div><nav class="navbar"><ul class="menu"><li class="menu-item" style="position:relative"><a href="/love" class="menu-item-link" title="朝暮"><i class="iconfont icon-aiqingniao" aria-hidden="true"></i> <span class="name">朝暮</span></a></li><li class="menu-item" style="position:relative"><a href="/" class="menu-item-link" title="首页"><i class="fas fa-home" aria-hidden="true"></i> <span class="name">首页</span></a></li><li class="menu-item" style="position:relative"><a href="javascript:;" class="menu-item-link" title="开往"><i class="iconfont icon-Trainfreeicon"></i> <span class="name">开往</span><i class="fas fa-chevron-down arrow" aria-hidden="true"></i></a><ul class="sub-menu"><li><a href="javascript:toRandomPost()"><i class="iconfont icon-suijishushengcheng" style="margin-top:-20px"></i> <span>随机一篇文章</span></a></li><li><a target="_blank" rel="noopener" href="https://storeweb.cn/s/2141"><i class="iconfont icon-method-draw-image" style="margin-top:-20px"></i> <span>个站商店虫洞</span></a></li></ul></li><li class="menu-item" style="position:relative"><a href="javascript:;" class="menu-item-link" title="友链"><i class="iconfont icon-youlian"></i> <span class="name">友链</span><i class="fas fa-chevron-down arrow" aria-hidden="true"></i></a><ul class="sub-menu"><li><a href="/links"><i class="iconfont icon-pengyouquan" style="margin-top:-20px"></i> <span>伙伴</span></a></li><li><a href="/comments"><i class="iconfont icon-liuyanban" style="margin-top:-20px"></i> <span>留言</span></a></li></ul></li><li class="menu-item" style="position:relative"><a href="javascript:;" class="menu-item-link" title="文章"><i class="iconfont iconfont icon-shijianxian"></i> <span class="name">文章</span><i class="fas fa-chevron-down arrow" aria-hidden="true"></i></a><ul class="sub-menu"><li><a href="/archives"><i class="fas fa-archive" style="margin-top:-20px"></i> <span>归档</span></a></li><li><a href="/tags"><i class="fas fa-tags" style="margin-top:-20px"></i> <span>标签</span></a></li><li><a href="/categories"><i class="fas fa-bookmark" style="margin-top:-20px"></i> <span>分类</span></a></li></ul></li><li class="menu-item" style="position:relative"><a href="javascript:;" class="menu-item-link" title="我的"><i class="iconfont icon-yule"></i> <span class="name">我的</span><i class="fas fa-chevron-down arrow" aria-hidden="true"></i></a><ul class="sub-menu"><li><a href="/bangumis"><i class="iconfont icon-fanju1" style="margin-top:-20px"></i> <span>追番</span></a></li><li><a href="/cinemas"><i class="iconfont icon-dianying" style="margin-top:-20px"></i> <span>追剧</span></a></li><li><a href="/music"><i class="iconfont icon-a-discbox" style="margin-top:-20px"></i> <span>音乐</span></a></li><li><a href="/gallery"><i class="iconfont icon-tuku" style="margin-top:-20px"></i> <span>图库</span></a></li></ul></li><li class="menu-item" style="position:relative"><a href="javascript:;" class="menu-item-link" title="更多"><i class="iconfont icon-gengduo"></i> <span class="name">更多</span><i class="fas fa-chevron-down arrow" aria-hidden="true"></i></a><ul class="sub-menu"><li><a href="/about"><i class="iconfont icon-guanyuwo" style="margin-top:-20px"></i> <span>关于我</span></a></li><li><a href="/wang"><i class="iconfont icon-dog" style="margin-top:-20px"></i> <span>汪汪汪~</span></a></li></ul></li><li class="menu-item" style="position:relative"><a href="javascript:;" class="menu-item-link" title="镜像"><i class="fas fa-link"></i> <span class="name">镜像</span><i class="fas fa-chevron-down arrow" aria-hidden="true"></i></a><ul class="sub-menu"><li><a href="https://yeminxi.github.io"><i class="iconfont icon-github" style="margin-top:-20px"></i> <span>GitHub 主站</span></a></li><li><a target="_blank" rel="noopener" href="https://yeminxi.vercel.app/"><i class="fab fa-vimeo" style="margin-top:-20px"></i> <span>Vercel 镜像站</span></a></li><li><a target="_blank" rel="noopener" href="https://r.ymx.us.kg/"><i class="fas fa-registered" style="margin-top:-20px"></i> <span>Render镜像站</span></a></li><li><a target="_blank" rel="noopener" href="https://www.ymx.us.kg/"><i class="iconfont icon-cloudflare" style="margin-top:-20px"></i> <span>Cloud 镜像站</span></a></li></ul></li></ul><div id="appSearch"><div class="search" @click="showDialog()"><i class="fas fa-search" aria-hidden="true"></i></div><transition name="fade"><div class="message-box_wrapper" style="display:none" v-cloak v-show="dialogVisible" @click.self="cancelDialogVisible()"><div class="message-box animated bounceInDown"><h2><span><i class="fas fa-search" aria-hidden="true"></i> <span class="title">本地搜索</span></span><i class="fas fa-times close" pointer style="float:right" aria-hidden="true" @click.self="cancelDialogVisible()"></i></h2><form class="site-search-form"><input type="text" placeholder="请输入关键字" id="local-search-input" @click="getSearchFile()" class="st-search-input" v-model="searchInput"></form><div class="result-wrapper"><div id="local-search-result" class="local-search-result-cls"></div></div></div></div></transition></div><script src="/js/local_search.js"></script><script>var body = document.body || document.documentElement || window;
  var vm = new Vue({
    el: '#appSearch',
    data: {
      dialogVisible: false,
      searchInput: '',
      top: 0,
    },
    computed: {
    },
    mounted() {
      window.addEventListener('pjax:complete', () => {
        this.cancelDialogVisible();
      })
    },
    methods: {
      showDialog() {
        this.dialogVisible = true;
        // 防止页面滚动，只能让弹框滚动
        this.top = $(document).scrollTop()
        body.style.cssText = 'overflow: hidden;';
      },
      getSearchFile() {
        if (!this.searchInput) {
          getSearchFile("/search.xml");
        }
      },
      cancelDialogVisible() {
        this.dialogVisible = false;
        body.removeAttribute('style');
        $(document).scrollTop(this.top)
      },
    },
    created() {}
  })</script></nav></div><a target="_blank" rel="noopener" href="https://github.com/yeminxi" class="github-corner color-primary" aria-label="View source on GitHub"><svg width="60" height="60" viewBox="0 0 250 250" style="fill:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></header><div class="bg-dark-floor" style="position:fixed;left:0;top:0;width:100%;height:100%;z-index:-1"></div><div class="post-detail-header" id="thumbnail_canvas" style="background-repeat:no-repeat;background-size:cover;background-position:center center;position:relative;background-image:url(/myimg/linux/6.jpg)"><div class="post-detail-header-mask"></div><canvas id="header_canvas" style="position:absolute;bottom:0;pointer-events:none"></canvas><div class="post-detail-header_info-box"><div class="title-box"><span class="title">第六章 Centos 7 Linux配置web 实训任务：Apache服务器部署</span></div><span class="post-detail-header_date"><i class="fas fa-calendar"></i> 发表于：2024-05-28 |</span><span class="post-detail-header_categories"><i class="iconfont iconbookmark1"></i> 分类： <a href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8A%80%E6%9C%AF%E4%B8%8E%E5%BA%94%E7%94%A8/" class="post-detail-header_category">服务器技术与应用</a></span><div class="post-detail-header_wordcount"><span class="totalcount"><i class="fas fa-file-text-o"></i> 字数统计: 1.5k |</span><span class="min2read"><i class="fas fa-clock"></i> 阅读时长: 7分钟 |</span><span class="reading"><i class="fas fa-eye"></i> 阅读量：<span id="busuanzi_value_page_pv"></span></span></div></div><script defer src="/js/bubble/bubble.js"></script></div><div class="post-detail-content post-row" style="padding-top:0"><div class="main-content"><article class="post post-detail"><div class="post-content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><em><strong>&#x3D;&#x3D;前面的DNS一定要成功才能做！！！&#x3D;&#x3D;</strong></em><br>虚拟机需求：1台DNS服务器（Server）、1台Web服务器（Web Server）、1台客户端（Client1）</p><blockquote><p><strong>在第五章的基础上继续实训</strong></p></blockquote><h2 id="Apache服务器部署"><a href="#Apache服务器部署" class="headerlink" title="Apache服务器部署"></a>Apache服务器部署</h2><blockquote><p>任务情境描述</p><p>某公司需要搭建一台Web服务器，用于公司办公和网站宣传；还有另一台DNS服务器，用于实现Web服务器的域名解析。</p></blockquote><p>网络拓扑图如下：<br><img src="https://ymxpic.pages.dev/file/f41d78cb8b0aed1fc5f16.png" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/f41d78cb8b0aed1fc5f16.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><blockquote><p>部署信息如下：</p><p>• Server1为DNS服务器，IP地址为：192.168.1.10；</p><p>• Server2为Web服务器，IP地址为：192.168.1.100。</p></blockquote><blockquote><h3 id="实训任务："><a href="#实训任务：" class="headerlink" title="实训任务："></a>实训任务：</h3><h4 id="任务1"><a href="#任务1" class="headerlink" title="任务1"></a>任务1</h4><p>搭建<a target="_blank" rel="noopener" href="http://web1.mydomain.com的web1服务器,主目录是/var/www/web1%EF%BC%8C%E5%8F%AA%E5%85%81%E8%AE%B8192.168.1.0/24%E7%BD%91%E6%AE%B5%E7%9A%84%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AE%E3%80%82">http://web1.mydomain.com的web1服务器，主目录是/var/www/web1，只允许192.168.1.0/24网段的主机访问。</a></p></blockquote><blockquote><h4 id="任务2"><a href="#任务2" class="headerlink" title="任务2"></a>任务2</h4><p>搭建基于8008端口号的安全服务器，可使用<a href="https://web2.mydomain.com:8008地址访问，主目录是/var/www/web2，使用CA颁发证书进行安全认证。">https://web2.mydomain.com:8008地址访问，主目录是/var/www/web2，使用CA颁发证书进行安全认证。</a><br>“CSK Global Root CA”颁发机构颁发，网站证书信息如下：<br>C &#x3D; CN<br>ST &#x3D; China<br>L &#x3D; GuangZhou<br>O &#x3D; mydomain.com<br>OU &#x3D; Operations Departments<br>CN &#x3D; web2.mydomain.com</p></blockquote><blockquote><h4 id="任务3-启动防火墙，SELinux设置为（Enforcing）。"><a href="#任务3-启动防火墙，SELinux设置为（Enforcing）。" class="headerlink" title="任务3 启动防火墙，SELinux设置为（Enforcing）。"></a>任务3 启动防火墙，SELinux设置为（Enforcing）。</h4></blockquote><h2 id="一、配置Web服务器（Web-Server）的IP地址"><a href="#一、配置Web服务器（Web-Server）的IP地址" class="headerlink" title="一、配置Web服务器（Web Server）的IP地址"></a>一、配置Web服务器（Web Server）的IP地址</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.1.100</span><br><span class="line">GATEWAY=192.168.1.2</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">DNS1=192.168.1.10</span><br><span class="line">DNS2=202.96.128.86</span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/3588694d141b24cb86fd7.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/3588694d141b24cb86fd7.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h2 id="二、在Web服务器（Web-Server）上生成CA证书"><a href="#二、在Web服务器（Web-Server）上生成CA证书" class="headerlink" title="二、在Web服务器（Web Server）上生成CA证书"></a>二、在Web服务器（Web Server）上生成CA证书</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="meta">@webserver</span> webserver]# cd /etc/pki/tls/certs/</span><br><span class="line">[root<span class="meta">@webserver</span> certs]# make server.key</span><br><span class="line"></span><br><span class="line">[root<span class="meta">@webserver</span> certs]# openssl rsa -in server.key -out server.key</span><br><span class="line"></span><br><span class="line">[root<span class="meta">@webserver</span> certs]# make server.csr</span><br><span class="line">umask <span class="number">77</span> ; \</span><br><span class="line">/usr/bin/openssl req -utf8 -<span class="keyword">new</span> -key server.key -out server.csr</span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a <span class="keyword">default</span> value,</span><br><span class="line">If you enter <span class="string">&#x27;.&#x27;</span>, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country <span class="title function_">Name</span> <span class="params">(<span class="number">2</span> letter code)</span> [XX]:CN</span><br><span class="line">State or Province <span class="title function_">Name</span> <span class="params">(full name)</span> []:China</span><br><span class="line">Locality <span class="title function_">Name</span> <span class="params">(eg, city)</span> [Default City]:GuangZhou</span><br><span class="line">Organization <span class="title function_">Name</span> <span class="params">(eg, company)</span> [Default Company Ltd]:ymx.com</span><br><span class="line">Organizational Unit <span class="title function_">Name</span> <span class="params">(eg, section)</span> []:Operations Deoartments</span><br><span class="line">Common <span class="title function_">Name</span> <span class="params">(eg, your name or your server<span class="string">&#x27;s hostname) []:web2.ymx.com</span></span></span><br><span class="line"><span class="string"><span class="params">Email Address []:</span></span></span><br><span class="line"><span class="string"><span class="params">Please enter the following &#x27;</span>extra<span class="string">&#x27; attributes</span></span></span><br><span class="line"><span class="string"><span class="params">to be sent with your certificate request</span></span></span><br><span class="line"><span class="string"><span class="params">A challenge password []:</span></span></span><br><span class="line"><span class="string"><span class="params">An optional company name []:</span></span></span><br><span class="line"><span class="string"><span class="params">[root@webserver certs]# openssl x509 -in server.csr -out server.pem -req -signkey server.key -days 365</span></span></span><br><span class="line"><span class="string"><span class="params"></span></span></span><br><span class="line"><span class="string"><span class="params">[root@webserver certs]# chmod 400 server.*</span></span></span><br><span class="line"><span class="string"><span class="params">[root@webserver certs]# yum -y install httpd mod_ssl</span></span></span><br><span class="line"><span class="string"><span class="params">[root@webserver certs]# systemctl restart httpd</span></span></span><br><span class="line"><span class="string"><span class="params"></span></span></span><br></pre></td></tr></table></figure><h3 id="1-修改OpenSSL配置文件"><a href="#1-修改OpenSSL配置文件" class="headerlink" title="1. 修改OpenSSL配置文件"></a>1. 修改OpenSSL配置文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/pki/tls/openssl.cnf	<span class="comment">//打开OpenSSL配置文件修改以下</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">my-ca.crt</span><br><span class="line">my-ca.crl</span><br><span class="line">my-ca.key</span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/b77d1cae565a551339b87.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/b77d1cae565a551339b87.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[ req_distinguished_name ]</span><br><span class="line">countryName                     = Country Name (2 letter code)</span><br><span class="line">countryName_default             = CN</span><br><span class="line">countryName_min                 = 2</span><br><span class="line">countryName_max                 = 2</span><br><span class="line"></span><br><span class="line">stateOrProvinceName             = State or Province Name (full name)</span><br><span class="line">stateOrProvinceName_default     = China</span><br><span class="line"></span><br><span class="line">localityName                    = Locality Name (eg, city)</span><br><span class="line">localityName_default            = GuangZhou</span><br><span class="line"></span><br><span class="line">0.organizationName              = Organization Name (eg, company)</span><br><span class="line">0.organizationName_default      = ymx.com</span><br><span class="line"></span><br><span class="line"># we can do this but it is not needed normally :-)</span><br><span class="line">#1.organizationName             = Second Organization Name (eg, company)</span><br><span class="line">#1.organizationName_default     = World Wide Web Pty Ltd</span><br><span class="line"></span><br><span class="line">organizationalUnitName          = Organizational Unit Name (eg, section)</span><br><span class="line">organizationalUnitName_default  = Operations Deoartments</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/22226e0fd346c29fb2244.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/22226e0fd346c29fb2244.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="2"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">保存退出 :wq</span><br><span class="line"> cd /etc/pki/CA/	<span class="comment">//进入CA目录</span></span><br><span class="line"> ls					<span class="comment">//查看目录</span></span><br></pre></td></tr></table></figure><h3 id="2-生成CA文件"><a href="#2-生成CA文件" class="headerlink" title="2. 生成CA文件"></a>2. 生成CA文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">touch /etc/pki/CA/index.txt							<span class="comment">//新建一个放数据的文件</span></span><br><span class="line">echo <span class="number">01</span> &gt; /etc/pki/CA/serial						<span class="comment">//创建一个索引文件</span></span><br><span class="line">openssl genrsa -out <span class="keyword">private</span>/my-ca.key -des3 <span class="number">2048</span>	<span class="comment">//生成CA文件，输入两次密码（请记住）</span></span><br></pre></td></tr></table></figure><h3 id="3-生成公钥文件"><a href="#3-生成公钥文件" class="headerlink" title="3. 生成公钥文件"></a>3. 生成公钥文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -<span class="keyword">new</span> -x509 -key <span class="keyword">private</span>/my-ca.key -days <span class="number">365</span> &gt; my-ca.crt	<span class="comment">//生成公钥文件</span></span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/33e752e42d0501a1cd602.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/33e752e42d0501a1cd602.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h3 id="4-创建Server-key"><a href="#4-创建Server-key" class="headerlink" title="4. 创建Server.key"></a>4. 创建Server.key</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -des3 -out server.key <span class="number">2048</span>	<span class="comment">//创建server.key</span></span><br><span class="line">ls											<span class="comment">//查看目录</span></span><br><span class="line">openssl rsa -noout -text -in server.key		<span class="comment">//不输出以text文本查看server.key，输入保护密钥</span></span><br><span class="line">cat server.key								<span class="comment">//查看</span></span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/19e6298977aca66589e01.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/19e6298977aca66589e01.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openssl req -<span class="keyword">new</span> -key server.key -out server.csr	<span class="comment">//证书申请</span></span><br><span class="line">ls													<span class="comment">//查看目录</span></span><br><span class="line">openssl ca -in server.csr -out server.crt			<span class="comment">//生成公钥文件，输入密码，两次确认</span></span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/a8bf6e2992bbfd4c2526c.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/a8bf6e2992bbfd4c2526c.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h2 id="三、在DNS服务器（Server）上添加记录"><a href="#三、在DNS服务器（Server）上添加记录" class="headerlink" title="三、在DNS服务器（Server）上添加记录"></a>三、在DNS服务器（Server）上添加记录</h2><h3 id="1-添加正向区域记录"><a href="#1-添加正向区域记录" class="headerlink" title="1. 添加正向区域记录"></a>1. 添加正向区域记录</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /<span class="keyword">var</span>/named/ymx.com.zone		<span class="comment">//打开正向区域文件</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  dns ymx.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      dns</span><br><span class="line">dns     A       192.168.1.10</span><br><span class="line">www     A       192.168.1.100</span><br><span class="line">web1    A       192.168.1.100				//添加这两条</span><br><span class="line">web2    A       192.168.1.100</span><br><span class="line">mail    A       192.168.1.200</span><br><span class="line">ftp     CNAME   www</span><br><span class="line">mail    MX 10   mail</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/79f13a2e82c1327208e20.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/79f13a2e82c1327208e20.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h3 id="2-添加反向区域记录"><a href="#2-添加反向区域记录" class="headerlink" title="2. 添加反向区域记录"></a>2. 添加反向区域记录</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /<span class="keyword">var</span>/named/<span class="number">1.168</span><span class="number">.192</span>.zone	<span class="comment">//打开反向区域配置文件</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$TTL 1D</span><br><span class="line">@       IN SOA  dns ymx.com. (</span><br><span class="line">                                        0       ; serial</span><br><span class="line">                                        1D      ; refresh</span><br><span class="line">                                        1H      ; retry</span><br><span class="line">                                        1W      ; expire</span><br><span class="line">                                        3H )    ; minimum</span><br><span class="line">        NS      dns</span><br><span class="line">dns     A       192.168.1.10</span><br><span class="line">10      PTR     dns.ymx.com.</span><br><span class="line">100     PTR     web1.ymx.com.				//添加这两条</span><br><span class="line">100     PTR     web2.ymx.com.</span><br><span class="line">100     PTR     www.ymx.com.</span><br><span class="line">100     PTR     ftp.ymx.com.</span><br><span class="line">200     PTR     mail.ymx.com.</span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/72bd3ad32aabc83beac7c.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/72bd3ad32aabc83beac7c.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart named			<span class="comment">//重启dns服务</span></span><br></pre></td></tr></table></figure><h2 id="四、在Web服务器（Web-Server）上安装httpd和mod-ssl服务"><a href="#四、在Web服务器（Web-Server）上安装httpd和mod-ssl服务" class="headerlink" title="四、在Web服务器（Web Server）上安装httpd和mod_ssl服务"></a>四、在Web服务器（Web Server）上安装httpd和mod_ssl服务</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install http mod_ssl		<span class="comment">//安装</span></span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/8c3e6d256b9c4e2debcaa.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/8c3e6d256b9c4e2debcaa.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h3 id="1-修改ssl配置文件"><a href="#1-修改ssl配置文件" class="headerlink" title="1.修改ssl配置文件"></a>1.修改ssl配置文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf.d/ssl.conf	<span class="comment">//修改配置文件</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Listen 8008 https									//监听8008端口</span><br><span class="line">&lt;VirtualHost *:8008&gt;								//虚拟主机头</span><br><span class="line">ServerName web2.ymx.com:8008						//服务器名</span><br><span class="line">DocumentRoot &quot;/var/www/web2&quot;						//目录</span><br><span class="line">SSLCertificateFile /etc/pki/CA/server.crt			//ca证书文件</span><br><span class="line">SSLCertificateKeyFile /etc/pki/CA/server.key 		//ca公钥文件</span><br><span class="line">SSLCACertificateFile /etc/pki/CA/server.crt			//ca私钥文件</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/ed674871c8806455ad6fd.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/ed674871c8806455ad6fd.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h3 id="2-新建网页"><a href="#2-新建网页" class="headerlink" title="2. 新建网页"></a>2. 新建网页</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="meta">@webserver</span> CA]# mkdir /<span class="keyword">var</span>/www/web1</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# mkdir /<span class="keyword">var</span>/www/web2</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# vim /<span class="keyword">var</span>/www/html/index.html</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# vim /<span class="keyword">var</span>/www/web1/index.html</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# vim /<span class="keyword">var</span>/www/web2/index.html</span><br></pre></td></tr></table></figure><h3 id="3-新建虚拟主机"><a href="#3-新建虚拟主机" class="headerlink" title="3. 新建虚拟主机"></a>3. 新建虚拟主机</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf.d/vhost.conf</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost www.ymx.com&gt;</span><br><span class="line">ServerName www.ymx.com</span><br><span class="line">DocumentRoot &quot;/var/www/html&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost web1.ymx.com&gt;</span><br><span class="line">ServerName web1.ymx.com</span><br><span class="line">DocumentRoot &quot;/var/www/web1&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory &#x27;/var/www/web1&#x27;&gt;</span><br><span class="line">Options Indexes FollowSymLinks</span><br><span class="line">AllowOverride None</span><br><span class="line">Order allow,deny</span><br><span class="line">allow from 192.168.1.0/24	//只允许192.168.1.0/24 通过</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/3398ac156559026841d36.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/3398ac156559026841d36.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="meta">@webserver</span> webserver]# systemctl restart httpd					<span class="comment">//重启http服务</span></span><br><span class="line">Enter SSL pass phrase <span class="keyword">for</span> web2.ymx.com:<span class="number">8008</span> (RSA) : ****			<span class="comment">//输入密码</span></span><br><span class="line">[root<span class="meta">@webserver</span> webserver]# systemctl enable httpd					<span class="comment">//开机自启</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.</span><br><span class="line">[root<span class="meta">@webserver</span> webserver]# </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-修改httpd-conf配置文件"><a href="#5-修改httpd-conf配置文件" class="headerlink" title="5. 修改httpd.conf配置文件"></a>5. 修改httpd.conf配置文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="meta">@webserver</span> CA]# vim /etc/httpd/conf/httpd.conf </span><br><span class="line">ServerName www.ymx.com:<span class="number">80</span></span><br></pre></td></tr></table></figure><p><img src="https://ymxpic.pages.dev/file/dbfdaf9ea0c91291785a8.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/dbfdaf9ea0c91291785a8.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h3 id="6-防火墙设置"><a href="#6-防火墙设置" class="headerlink" title="6. 防火墙设置"></a>6. 防火墙设置</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="meta">@webserver</span> CA]# firewall-cmd --permanent --zone=<span class="keyword">public</span> --add-service=http	<span class="comment">//开启http</span></span><br><span class="line">success</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# firewall-cmd --permanent --zone=<span class="keyword">public</span> --add-service=https	<span class="comment">//开启https</span></span><br><span class="line">success</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# firewall-cmd --permanent --zone=<span class="keyword">public</span> --add-port=<span class="number">8008</span>/tcp	<span class="comment">//开启8008端口</span></span><br><span class="line">success</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# firewall-cmd --permanent --zone=<span class="keyword">public</span> --add-port=<span class="number">8008</span>/udp</span><br><span class="line">success</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# firewall-cmd --reload 										<span class="comment">//重启防火墙</span></span><br><span class="line">success</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# netstat -an | grep :<span class="number">8008</span>									<span class="comment">//查看端口</span></span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> :::<span class="number">8008</span>                 :::*                    LISTEN     </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="7-复制证书文件"><a href="#7-复制证书文件" class="headerlink" title="7. 复制证书文件"></a>7. 复制证书文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="meta">@webserver</span> CA]# cd /etc/pki/CA</span><br><span class="line">[root<span class="meta">@webserver</span> CA]# cp my-ca.crt /<span class="keyword">var</span>/www/web1/</span><br></pre></td></tr></table></figure><h3 id="8-客户端（Client-1）导入CA证书"><a href="#8-客户端（Client-1）导入CA证书" class="headerlink" title="8. 客户端（Client 1）导入CA证书"></a>8. 客户端（Client 1）导入CA证书</h3><h4 id="打开浏览器输入地址http-web1-ymx-com-my-ca-crt-下载证书文件并导入证书"><a href="#打开浏览器输入地址http-web1-ymx-com-my-ca-crt-下载证书文件并导入证书" class="headerlink" title="打开浏览器输入地址http://web1.ymx.com/my-ca.crt 下载证书文件并导入证书"></a>打开浏览器输入地址<a target="_blank" rel="noopener" href="http://web1.ymx.com/my-ca.crt">http://web1.ymx.com/my-ca.crt</a> 下载证书文件并导入证书</h4><p><img src="https://ymxpic.pages.dev/file/9ec2f9471a9bc62b2dc9c.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/9ec2f9471a9bc62b2dc9c.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h3 id="9-最终效果"><a href="#9-最终效果" class="headerlink" title="9. 最终效果"></a>9. 最终效果</h3><p><strong>http：&#x2F;&#x2F;web1.ymx.com<br><a target="_blank" rel="noopener" href="https://web2.ymx.com:8008/">https://web2.ymx.com:8008</a></strong><br><img src="https://ymxpic.pages.dev/file/0178b6492fb0d7a243482.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/0178b6492fb0d7a243482.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h2 id="至此，实验结束"><a href="#至此，实验结束" class="headerlink" title="至此，实验结束"></a>至此，实验结束</h2></div><div class="post-tags-categories"><div class="tags"><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a> <a href="/tags/Linux/">Linux</a> <a href="/tags/CentOS/">CentOS</a> <a href="/tags/Apache/">Apache</a></div></div><div class="copyright"><ul class="post-copyright"><li class="post-copyright-author"><strong>作者:</strong> 叶泯希</li><li class="post-copyright-link"><strong>文章链接:</strong> <a href="/posts/f0f1ea42.html" target="_blank" title="第六章 Centos 7 Linux配置web 实训任务：Apache服务器部署">https://yeminxi.github.io/posts/f0f1ea42.html</a></li><li class="post-copyright-license"><strong>版权声明:</strong> 本网站所有文章除特别声明外,均采用 <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a> 许可协议。转载请注明出处!</li></ul><div></div></div></article><div class="post-nav"><div class="post-nav-prev post-nav-item"><div class="post-nav-img" style="background-size:cover;background-position:center center"><img class="lazyload lazyload placeholder" src="/myimg/linux/7.jpg" class="lazyload placeholder" data-srcset="/myimg/linux/7.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=""></div><a href="/posts/2d95345a.html" class="post-nav-link"><div class="title"><i class="fas fa-angle-left"></i> 上一篇:<div class="title-text">第七章 Centos 7 Linux配置ftp 实训任务1：FTP服务器加密传输</div></div></a></div><div class="post-nav-next post-nav-item"><div class="post-nav-img" style="background-size:cover;background-position:center center"><img class="lazyload lazyload placeholder" src="/myimg/linux/5.jpg" class="lazyload placeholder" data-srcset="/myimg/linux/5.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" src="" alt=""></div><a href="/posts/974b3ed7.html" class="post-nav-link"><div class="title">下一篇:<i class="fas fa-angle-right"></i><div class="title-text">第五章 Centos 7 Linux配置dns 实训任务：部署DNS服务器</div></div></a></div></div><div id="appDonate" class="post-donate"><div id="donate_board" class="donate_bar center" ref="donate"><a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏" @click="showDialogDrawer()"></a></div><transition name="fade"><div class="donate-box-mask" v-cloak v-show="visible" @click="cancelDialogDrawer()"></div></transition><transition name="bounce"><div class="donate-box" v-cloak v-show="visible"><div class="donate-box_close"><i class="fas fa-times" aria-hidden="true" @click="cancelDialogDrawer" pointer></i></div><div class="donate-box_title"><h4>你的赏识是我前进的动力</h4></div><div class="donate-box_tab"><div class="Alipay" pointer :class="{'active': tabActive === 'Alipay'}" @click="changeTabActive('Alipay')">支付宝</div><div class="WeChatpay" pointer :class="{'active': tabActive === 'WeChatpay'}" @click="changeTabActive('WeChatpay')">微信</div></div><div class="donate-box_img"><div class="AlipayImg" v-show="tabActive === 'Alipay'"><img src="https://ymxpic.pages.dev/file/fd7d08e6da14e2a24574c.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/fd7d08e6da14e2a24574c.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="支付宝打赏"></div><div class="WeChatpayImg" v-show="tabActive === 'WeChatpay'"><img src="https://ymxpic.pages.dev/file/7e09ae4620f63b93ce154.jpg" class="lazyload placeholder" data-srcset="https://ymxpic.pages.dev/file/7e09ae4620f63b93ce154.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="微信打赏"></div></div></div></transition></div><script>var body = document.body || document.documentElement || window;
  var vm = new Vue({
    el: '#appDonate',
    data: {
      visible: false,
      tabActive: 'Alipay',
      top: 0,
    },
    computed: {
    },
    mounted() {
    },
    methods: {
      showDialogDrawer() {
        this.visible = true;
        // 防止页面滚动，只能让弹框滚动
        // function getScroll() {
        //   return {
        //     left: window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0,
        //     top: window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0
        //   };
        // }
        this.top = $(document).scrollTop() // or getScroll().top
        // console.log('aa', $('.main-content'));
        body.style.cssText = 'overflow: hidden;';
      },
      cancelDialogDrawer() {
        this.visible = false;
        body.removeAttribute('style');
        $(document).scrollTop(this.top)
      },
      changeTabActive(name) {
        this.tabActive = name;
      }
    },
    created() {}
  })</script><div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script defer src="/js/shareJs/social-share.min.js"></script><style>.social-share{margin:20px 0}</style><div id="myComment"><section id="waline-box"><div id="waline-comment"></div></section></div></div><aside id="l_side"><section class="widget side_blogger"><div class="content"><a class="avatar flat-box rectangle" href="/about/"><img src="/images/avatar.webp"></a><div class="text"><h2>叶泯希</h2><p>意义是自己赐予的</p><p><span id="jinrishici-sentence">叶泯希·杂七杂八的🐕窝</span></p><script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script></div><div class="social-wrapper"><a href="https://space.bilibili.com/489178597" class="social iconfont icon-bilibili-1 flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a><a href="mailto:ymxykx@qq.com" class="social iconfont icon-a-Deliverydisongfasongzhifeiji flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a><a href="https://github.com/yeminxi" class="social iconfont icon-github1 flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a><a href="/atom.xml" class="social iconfont icon-RSS flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div></div></section><div class="layout_sticky"><section class="widget side_toc"><header><i class="fas fa-list fa-fw" aria-hidden="true"></i> <span class="name">本文目录</span></header><div class="content"><div class="toc-main"><div class="toc-content"><div class="toc"></div></div></div></div></section><div id="toc-mobile-btn"><i class="fas fa-list-ul" aria-hidden="true"></i></div><section class="widget side_recent_post"><header><a href="/tags/"><i class="fas fa-book fa-fw" aria-hidden="true"></i> <span class="name">最新文章</span></a></header><div class="content"><div class="aside-list"><div class="aside-list-item"><div class="post-img-box"><a href="/posts/1fd2008f.html" class="post-img" style="background-size:cover;background-position:center center"><img class="lazyload lazyload placeholder" style="width:100%;height:100%;object-fit:cover" data-src="/myimg/tc/2024/616.jpg" class="lazyload placeholder" data-srcset="/myimg/tc/2024/616.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=""></a></div><div class="post-date-title"><div><span class="post-date">06-16</span></div><a class="post-title" href="/posts/1fd2008f.html">去拥抱陌生，期待惊喜，所有的不期而遇都在</a></div></div><div class="aside-list-item"><div class="post-img-box"><a href="/posts/99b18e00.html" class="post-img" style="background-size:cover;background-position:center center"><img class="lazyload lazyload placeholder" style="width:100%;height:100%;object-fit:cover" data-src="/myimg/tc/2024/64-1.jpg" class="lazyload placeholder" data-srcset="/myimg/tc/2024/64-1.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=""></a></div><div class="post-date-title"><div><span class="post-date">06-04</span></div><a class="post-title" href="/posts/99b18e00.html">人生天地间，忽如远行客</a></div></div><div class="aside-list-item"><div class="post-img-box"><a href="/posts/25cdb40a.html" class="post-img" style="background-size:cover;background-position:center center"><img class="lazyload lazyload placeholder" style="width:100%;height:100%;object-fit:cover" data-src="/myimg/tc/2024/530-1.jpg" class="lazyload placeholder" data-srcset="/myimg/tc/2024/530-1.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=""></a></div><div class="post-date-title"><div><span class="post-date">05-30</span></div><a class="post-title" href="/posts/25cdb40a.html">少年的征途应是星辰大海，而非烟尘人间</a></div></div><div class="aside-list-item"><div class="post-img-box"><a href="/posts/878c6909.html" class="post-img" style="background-size:cover;background-position:center center"><img class="lazyload lazyload placeholder" style="width:100%;height:100%;object-fit:cover" data-src="/myimg/by/1.jpg" class="lazyload placeholder" data-srcset="/myimg/by/1.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=""></a></div><div class="post-date-title"><div><span class="post-date">05-28</span></div><a class="post-title" href="/posts/878c6909.html">基于PHP的动态网站设计与实现 ——商品管理网站 数据库表结构</a></div></div><div class="aside-list-item"><div class="post-img-box"><a href="/posts/660d7bf6.html" class="post-img" style="background-size:cover;background-position:center center"><img class="lazyload lazyload placeholder" style="width:100%;height:100%;object-fit:cover" data-src="/myimg/linux/8.jpg" class="lazyload placeholder" data-srcset="/myimg/linux/8.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt=""></a></div><div class="post-date-title"><div><span class="post-date">05-28</span></div><a class="post-title" href="/posts/660d7bf6.html">第八章 Centos 7 Linux配置mariadb 实训任务：部署数据库</a></div></div></div></div></section></div></aside><script defer src="/js/wrapImage.js"></script></div><div id="appBgSwiper" style="position:fixed;left:0;top:0;width:100%;height:100%;z-index:-2" :style="{'background-color': bgColor ? bgColor : 'transparent'}"><transition-group tag="ul" :name="names"><li v-for="(image,index) in img" :key="index" v-show="index === mark" class="bg-swiper-box"><img :src="image" class="bg-swiper-img no-lazy"></li></transition-group></div><script>var vm = new Vue({
		el: '#appBgSwiper',
		data: {
			names: '' || 'fade' || 'fade', // translate-fade fade
			mark: 0,
			img: [],
			bgColor: '',
			time: null
		},
		methods: {   //添加方法
			change(i, m) {
				if (i > m) {
					// this.names = 'fade';
				} else if (i < m) {
					// this.names = 'fade';
				} else {
					return;
				}
				this.mark = i;
			},
			prev() {
				// this.names = 'fade';
				this.mark--;
				if (this.mark === -1) {
					this.mark = 3;
					return
				}
			},
			next() {
				// this.names = 'fade';
				this.mark++;
				if (this.mark === this.img.length) {
					this.mark = 0;
					return
				}
			},
			autoPlay() {
				// this.names = 'fade';
				this.mark++;
				if (this.mark === this.img.length) {
					this.mark = 0;
					return
				}
			},
			play() {
				let bgImgDelay = '' || '180000'
				let delay = parseInt(bgImgDelay) || 180000;
				this.time = setInterval(this.autoPlay, delay);
			},
			enter() {
				clearInterval(this.time);
			},
			leave() {
				this.play();
			}
		},
		created() {
			this.play()
		},
		beforeDestroy() {
			clearInterval(this.time);
		},
		mounted() {
			let prop = '' || 'https://api.vvhan.com/api/wallpaper/acg';
			let isImg = prop.includes('.bmp') || prop.includes('.jpg') || prop.includes('.png') || prop.includes('.tif') || prop.includes('.gif') || prop.includes('.pcx') || prop.includes('.tga') || prop.includes('.exif') || prop.includes('.fpx') || prop.includes('.psd') || prop.includes('.cdr') || prop.includes('.pcd') || prop.includes('.dxf') || prop.includes('.ufo') || prop.includes('.eps') || prop.includes('.ai') || prop.includes('.raw') || prop.includes('.WMF') || prop.includes('.webp') || prop.includes('.jpeg') || prop.includes('http://') || prop.includes('https://')
			if (isImg) {
				let img = prop.split(',');
				let configRoot = '/'
				let arrImg = [];
				img.forEach(el => {
					var Expression = /http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/;
					var objExp = new RegExp(Expression);

					if (objExp.test(el)) {
						// http or https
						arrImg.push(el);
					} else {
						// 非http or https开头
						// 本地文件
						let firstStr = el.charAt(0);
						if (firstStr == '/') {
							el = el.substr(1); // 删除第一个字符 '/',因为 configRoot最后一个字符为 /
						}
						el = configRoot + el;
						arrImg.push(el);
					}
				})
				this.img = arrImg;
			} else {
				this.bgColor = prop;
			}
		}
	})</script><style>.bg-swiper-box{position:absolute;display:block;width:100%;height:100%}.bg-swiper-img{object-fit:cover;width:100%;height:100%}</style><script>function loadMermaid() {
    if (document.getElementsByClassName('mermaid').length) {
      if (window.mermaidJsLoad) mermaid.init()
      else {
        loadScript('https://unpkg.com/mermaid/dist/mermaid.min.js').then(() => {
          window.mermaidJsLoad = true
          mermaid.initialize({
            theme: 'default',
          })
          if ('true') {
            mermaid.init();
          }
        })
      }
    }
  };
  document.addEventListener("DOMContentLoaded", function () {
    loadMermaid();
  })

  document.addEventListener('pjax:complete', function () {
    loadMermaid();
  })</script></main></div><div id="j-fish-skip" style="position:relative;height:153px;width:auto"></div><script defer>var RENDERER = {
    POINT_INTERVAL: 5,
    FISH_COUNT: 3,
    MAX_INTERVAL_COUNT: 50,
    INIT_HEIGHT_RATE: .5,
    THRESHOLD: 50,
    FISH_COLOR: '',
    init: function () {
      this.setFishColor(); this.setParameters(), this.reconstructMethods(), this.setup(), this.bindEvent(), this.render()
    },
    setFishColor: function () {
      let isDark = JSON.parse(localStorage.getItem('dark')) || JSON.parse('false');
      if (isDark) {
        this.FISH_COLOR = '#222'; // 暗黑色，有时间把这整成一个变量
      } else {
        this.FISH_COLOR = '' || 'rgba(0,0,0,0.5)';
      }
    },
    setParameters: function () {
      this.$window = $(window), this.$container = $("#j-fish-skip"), this.$canvas = $("<canvas />"), this.context = this.$canvas.appendTo(this.$container).get(0).getContext("2d"), this.points = [], this.fishes = [], this.watchIds = []
    },
    createSurfacePoints: function () {
      var t = Math.round(this.width / this.POINT_INTERVAL);
      this.pointInterval = this.width / (t - 1), this.points.push(new SURFACE_POINT(this, 0));
      for (var i = 1; i < t; i++) {
        var e = new SURFACE_POINT(this, i * this.pointInterval),
          h = this.points[i - 1];
        e.setPreviousPoint(h), h.setNextPoint(e), this.points.push(e)
      }
    },
    reconstructMethods: function () {
      this.watchWindowSize = this.watchWindowSize.bind(this), this.jdugeToStopResize = this.jdugeToStopResize.bind(this), this.startEpicenter = this.startEpicenter.bind(this), this.moveEpicenter = this.moveEpicenter.bind(this), this.reverseVertical = this.reverseVertical.bind(this), this.render = this.render.bind(this)
    },
    setup: function () {
      this.points.length = 0, this.fishes.length = 0, this.watchIds.length = 0, this.intervalCount = this.MAX_INTERVAL_COUNT, this.width = this.$container.width(), this.height = this.$container.height(), this.fishCount = this.FISH_COUNT * this.width / 500 * this.height / 500, this.$canvas.attr({
        width: this.width,
        height: this.height
      }), this.reverse = !1, this.fishes.push(new FISH(this)), this.createSurfacePoints()
    },
    watchWindowSize: function () {
      this.clearTimer(), this.tmpWidth = this.$window.width(), this.tmpHeight = this.$window.height(), this.watchIds.push(setTimeout(this.jdugeToStopResize, this.WATCH_INTERVAL))
    },
    clearTimer: function () {
      for (; this.watchIds.length > 0;) clearTimeout(this.watchIds.pop())
    },
    jdugeToStopResize: function () {
      var t = this.$window.width(),
        i = this.$window.height(),
        e = t == this.tmpWidth && i == this.tmpHeight;
      this.tmpWidth = t, this.tmpHeight = i, e && this.setup()
    },
    bindEvent: function () {
      this.$window.on("resize", this.watchWindowSize), this.$container.on("mouseenter", this.startEpicenter), this.$container.on("mousemove", this.moveEpicenter)
    },
    getAxis: function (t) {
      var i = this.$container.offset();
      return {
        x: t.clientX - i.left + this.$window.scrollLeft(),
        y: t.clientY - i.top + this.$window.scrollTop()
      }
    },
    startEpicenter: function (t) {
      this.axis = this.getAxis(t)
    },
    moveEpicenter: function (t) {
      var i = this.getAxis(t);
      this.axis || (this.axis = i), this.generateEpicenter(i.x, i.y, i.y - this.axis.y), this.axis = i
    },
    generateEpicenter: function (t, i, e) {
      if (!(i < this.height / 2 - this.THRESHOLD || i > this.height / 2 + this.THRESHOLD)) {
        var h = Math.round(t / this.pointInterval);
        h < 0 || h >= this.points.length || this.points[h].interfere(i, e)
      }
    },
    reverseVertical: function () {
      this.reverse = !this.reverse;
      for (var t = 0, i = this.fishes.length; t < i; t++) this.fishes[t].reverseVertical()
    },
    controlStatus: function () {
      for (var t = 0, i = this.points.length; t < i; t++) this.points[t].updateSelf();
      for (t = 0, i = this.points.length; t < i; t++) this.points[t].updateNeighbors();
      this.fishes.length < this.fishCount && 0 == --this.intervalCount && (this.intervalCount = this.MAX_INTERVAL_COUNT, this.fishes.push(new FISH(this)))
    },
    render: function () {
      requestAnimationFrame(this.render), this.controlStatus(), this.context.clearRect(0, 0, this.width, this.height), this.context.fillStyle = this.FISH_COLOR;
      for (var t = 0, i = this.fishes.length; t < i; t++) this.fishes[t].render(this.context);
      this.context.save(), this.context.globalCompositeOperation = "xor", this.context.beginPath(), this.context.moveTo(0, this.reverse ? 0 : this.height);
      for (t = 0, i = this.points.length; t < i; t++) this.points[t].render(this.context);
      this.context.lineTo(this.width, this.reverse ? 0 : this.height), this.context.closePath(), this.context.fill(), this.context.restore()
    }
  },
  SURFACE_POINT = function (t, i) {
    this.renderer = t, this.x = i, this.init()
  };
  SURFACE_POINT.prototype = {
    SPRING_CONSTANT: .03,
    SPRING_FRICTION: .9,
    WAVE_SPREAD: .3,
    ACCELARATION_RATE: .01,
    init: function () {
      this.initHeight = this.renderer.height * this.renderer.INIT_HEIGHT_RATE, this.height = this.initHeight, this.fy = 0, this.force = {
        previous: 0,
        next: 0
      }
    },
    setPreviousPoint: function (t) {
      this.previous = t
    },
    setNextPoint: function (t) {
      this.next = t
    },
    interfere: function (t, i) {
      this.fy = this.renderer.height * this.ACCELARATION_RATE * (this.renderer.height - this.height - t >= 0 ? -1 : 1) * Math.abs(i)
    },
    updateSelf: function () {
      this.fy += this.SPRING_CONSTANT * (this.initHeight - this.height), this.fy *= this.SPRING_FRICTION, this.height += this.fy
    },
    updateNeighbors: function () {
      this.previous && (this.force.previous = this.WAVE_SPREAD * (this.height - this.previous.height)), this.next && (this.force.next = this.WAVE_SPREAD * (this.height - this.next.height))
    },
    render: function (t) {
      this.previous && (this.previous.height += this.force.previous, this.previous.fy += this.force.previous), this.next && (this.next.height += this.force.next, this.next.fy += this.force.next), t.lineTo(this.x, this.renderer.height - this.height)
    }
  };
  var FISH = function (t) {
    this.renderer = t, this.init()
  };
  FISH.prototype = {
    GRAVITY: .4,
    init: function () {
      this.direction = Math.random() < .5, this.x = this.direction ? this.renderer.width + this.renderer.THRESHOLD : -this.renderer.THRESHOLD, this.previousY = this.y, this.vx = this.getRandomValue(4, 10) * (this.direction ? -1 : 1), this.renderer.reverse ? (this.y = this.getRandomValue(1 * this.renderer.height / 10, 4 * this.renderer.height / 10), this.vy = this.getRandomValue(2, 5), this.ay = this.getRandomValue(.05, .2)) : (this.y = this.getRandomValue(6 * this.renderer.height / 10, 9 * this.renderer.height / 10), this.vy = this.getRandomValue(-5, -2), this.ay = this.getRandomValue(-.2, -.05)), this.isOut = !1, this.theta = 0, this.phi = 0
    },
    getRandomValue: function (t, i) {
      return t + (i - t) * Math.random()
    },
    reverseVertical: function () {
      this.isOut = !this.isOut, this.ay *= -1
    },
    controlStatus: function (t) {
      this.previousY = this.y, this.x += this.vx, this.y += this.vy, this.vy += this.ay, this.renderer.reverse ? this.y > this.renderer.height * this.renderer.INIT_HEIGHT_RATE ? (this.vy -= this.GRAVITY, this.isOut = !0) : (this.isOut && (this.ay = this.getRandomValue(.05, .2)), this.isOut = !1) : this.y < this.renderer.height * this.renderer.INIT_HEIGHT_RATE ? (this.vy += this.GRAVITY, this.isOut = !0) : (this.isOut && (this.ay = this.getRandomValue(-.2, -.05)), this.isOut = !1), this.isOut || (this.theta += Math.PI / 20, this.theta %= 2 * Math.PI, this.phi += Math.PI / 30, this.phi %= 2 * Math.PI), this.renderer.generateEpicenter(this.x + (this.direction ? -1 : 1) * this.renderer.THRESHOLD, this.y, this.y - this.previousY), (this.vx > 0 && this.x > this.renderer.width + this.renderer.THRESHOLD || this.vx < 0 && this.x < -this.renderer.THRESHOLD) && this.init()
    },
    render: function (t) {
      t.save(), t.translate(this.x, this.y), t.rotate(Math.PI + Math.atan2(this.vy, this.vx)), t.scale(1, this.direction ? 1 : -1), t.beginPath(), t.moveTo(-30, 0), t.bezierCurveTo(-20, 15, 15, 10, 40, 0), t.bezierCurveTo(15, -10, -20, -15, -30, 0), t.fill(), t.save(), t.translate(40, 0), t.scale(.9 + .2 * Math.sin(this.theta), 1), t.beginPath(), t.moveTo(0, 0), t.quadraticCurveTo(5, 10, 20, 8), t.quadraticCurveTo(12, 5, 10, 0), t.quadraticCurveTo(12, -5, 20, -8), t.quadraticCurveTo(5, -10, 0, 0), t.fill(), t.restore(), t.save(), t.translate(-3, 0), t.rotate((Math.PI / 3 + Math.PI / 10 * Math.sin(this.phi)) * (this.renderer.reverse ? -1 : 1)), t.beginPath(), this.renderer.reverse ? (t.moveTo(5, 0), t.bezierCurveTo(10, 10, 10, 30, 0, 40), t.bezierCurveTo(-12, 25, -8, 10, 0, 0)) : (t.moveTo(-5, 0), t.bezierCurveTo(-10, -10, -10, -30, 0, -40), t.bezierCurveTo(12, -25, 8, -10, 0, 0)), t.closePath(), t.fill(), t.restore(), t.restore(), this.controlStatus(t)
    }
  }, $(function () {
    RENDERER.init()
    $('.dark').click(function () {
      setTimeout(() => {
        RENDERER.setFishColor();
        RENDERER.context.fill();
      });
    })
  });</script><div class="footer bg-color"><div class="footer-main"><div class="link"><a target="_blank" rel="noopener" href="https://space.bilibili.com/489178597" class="social"><i class="iconfont icon-bilibili" aria-hidden="true"></i></a><a href="mailto:ymxykx@qq.com" class="social"><i class="iconfont icon-a-Deliverydisongfasongzhifeiji" aria-hidden="true"></i></a><a target="_blank" rel="noopener" href="https://github.com/yeminxi" class="social"><i class="iconfont icon-github1" aria-hidden="true"></i></a><a href="/atom.xml" class="social"><i class="iconfont icon-RSS" aria-hidden="true"></i></a></div><div class="footer-copyright"><p>Copyright © 2024 - 2024 <a target="_blank" rel="noopener" href="https://github.com/yeminxi/">叶泯希</a></p></div><div class="footer-custom"></div><div><p><span id="runtime"></span><br>友情链接： <a target="_blank" rel="noopener" href="https://candinya.com/">糖菓·部落</a>&nbsp; <a target="_blank" rel="noopener" href="https://zhangpingguo.com/">张苹果</a>&nbsp;</p></div><div><p><a href="https://blogscn.fun/" title="BLOGS·CN" target="_blank"><img src="https://photo.xiangming.site/img/blogscn.png" class="lazyload placeholder" data-srcset="https://photo.xiangming.site/img/blogscn.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="本站已加入BLOGS·CN" style="width:auto;height:15px"></a></p></div><div><p><a target="_blank" href="https://hexo.io/" title="博客框架为Hexo_v7.2.0"><img src="/images/fram.svg" class="lazyload placeholder" data-srcset="/images/fram.svg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></a><a target="_blank" href="https://github.com/yuang01/hexo-theme-bamboo/" title="主题版本Bamboo_v3.0.9"><img src="/images/theme.svg" class="lazyload placeholder" data-srcset="/images/theme.svg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></a><a target="_blank" href="https://icp.gov.moe/?keyword=20245120" title="萌ICP备20245120号"><img src="/images/meng.svg" class="lazyload placeholder" data-srcset="/images/meng.svg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></a><a target="_blank" href="https://github.com/" title="本站项目由Github托管"><img src="/images/github.svg" class="lazyload placeholder" data-srcset="/images/github.svg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></a><a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="/images/4.svg" class="lazyload placeholder" data-srcset="/images/4.svg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></a></p></div></div></div><div class="dark" onclick="toggleDarkMode()"><div class="dark-content"><i class="fas" id="darkIcon" aria-hidden="true"></i></div></div><script defer>$(function() {
    // 初始化暗黑模式状态
    let isDark = JSON.parse(localStorage.getItem('dark')) || JSON.parse('false');
    updateDarkModeIcon(isDark);
  });

  function toggleDarkMode() {
    const isDark = $(document.body).hasClass('darkModel');
    $(document.body).toggleClass('darkModel');
    localStorage.setItem('dark', !isDark);
    updateDarkModeIcon(!isDark);
  }

  function updateDarkModeIcon(isDark) {
    const iconElement = document.getElementById('darkIcon');
    if (isDark) {
      iconElement.classList.remove('fa-moon');
      iconElement.classList.add('fa-lightbulb');
    } else {
      iconElement.classList.remove('fa-lightbulb');
      iconElement.classList.add('fa-moon');
    }
  }</script><div class="goTop top-btn-color" pointer><i class="fas fa-arrow-up" aria-hidden="true"></i></div><script defer src="/js/goTop.js"></script><link rel="stylesheet" href="/js/aplayer/APlayer@1.10.1.min.css"><style>.aplayer .aplayer-lrc p{font-size:12px;font-weight:700;line-height:16px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{font-size:15px;color:#42b983}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><meting-js server="netease" type="playlist" id="4930421579" fixed="true" autoplay theme="#42b983" loop order="random" preload="none" volume="1" list-folded="true"></meting-js><script defer src="https://unpkg.com/aplayer@1.10.1/dist/APlayer.min.js"></script><script defer src="https://unpkg.com/meting@2/dist/Meting.min.js"></script><script src="https://unpkg.com/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script><script async>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?22a638c481b4daa8a64c6613c83d14d4";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/utils/index.js"></script><script src="/js/app.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.18.2/tocbot.css"><script>var headerEl = 'h2, h3, h4',  //headers 
    content = '.post-detail',//文章容器
    idArr = {};  //标题数组以确定是否增加索引id
  //add #id
  var option = {
    // Where to render the table of contents.
    tocSelector: '.toc',
    // Where to grab the headings to build the table of contents.
    contentSelector: content,
    // Which headings to grab inside of the contentSelector element.
    headingSelector: headerEl,
    scrollSmooth: true,
    scrollSmoothOffset: -70,
    // headingsOffset: -($(window).height() * 0.4 - 45),
    headingsOffset: -($(window).height() * 0.4 - 70),
    // positionFixedSelector: '.toc-main',
    // positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    activeLinkClass: 'is-active-link',
    orderedList: true,
    collapseDepth: 20,
    // onClick: function (e) {},
  }
  if ($('.toc').length > 0) {

    $(content).children(headerEl).each(function () {
      //去除空格以及多余标点
      var headerId = $(this).text().replace(/[\s|\~|`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\_|\+|\=|\||\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\.|\>|\/|\?|\：|\，|\。]/g, '');

      headerId = headerId.toLowerCase();
      if (idArr[headerId]) {
        //id已经存在
        $(this).attr('id', headerId + '-' + idArr[headerId]);
        idArr[headerId]++;
      }
      else {
        //id未存在
        idArr[headerId] = 1;
        $(this).attr('id', headerId);
      }
    });

    document.addEventListener("DOMContentLoaded", function () {
      tocbot.init(option);
      mobileTocClick();
    });

  }

  window.tocScrollFn = function () {
    return bamboo.throttle(function () {
      findHeadPosition();
    }, 100)()
  }
  window.addEventListener('scroll', tocScrollFn);

  const findHeadPosition = function (top) {
    if ($('.toc-list').length <= 0) {
      return false;
    }
    setTimeout(() => {  // or DOMContentLoaded 
      autoScrollToc();
    }, 0);
  }

  const autoScrollToc = function () {
    const $activeItem = document.querySelector('.is-active-link');
    const $cardToc = document.querySelector('.toc-content');
    const activePosition = $activeItem.getBoundingClientRect().top
    const sidebarScrollTop = $cardToc.scrollTop
    if (activePosition > (document.documentElement.clientHeight - 100)) {
      $cardToc.scrollTop = sidebarScrollTop + 150
    }
    if (activePosition < 150) {
      $cardToc.scrollTop = sidebarScrollTop - 150
    }
  }

  document.addEventListener('pjax:send', function () {
    if ($('.toc').length) {
      tocbot.destroy();
    }
  });

  document.addEventListener('pjax:complete', function () {
    if ($('.toc').length) {
      tocbot.init(option);
      mobileTocClick();
    }
  });
  
  // 手机端toc按钮点击出现目录
  const mobileTocClick = function () {
    const $cardTocLayout = document.getElementsByClassName('side_toc')[0];
    const $cardToc = $cardTocLayout.getElementsByClassName('toc-content')[0];
    let right = '45px';
    if (window.innerWidth >= 551 && window.innerWidth <= 992) {
      right = '100px'
    }
    const mobileToc = {
      open: () => {
        $cardTocLayout.style.cssText = 'animation: toc-open .3s; opacity: 1; right: ' + right
      },

      close: () => {
        $cardTocLayout.style.animation = 'toc-close .2s'
        setTimeout(() => {
          $cardTocLayout.style.cssText = "opacity:''; animation: ''; right: ''"
        }, 100)
      }
    }
    document.getElementById('toc-mobile-btn').addEventListener('click', () => {
      if (window.getComputedStyle($cardTocLayout).getPropertyValue('opacity') === '0') mobileToc.open()
      else mobileToc.close()
    })

    $cardToc.addEventListener('click', (e) => {
      if (window.innerWidth < 992) { // 小于992px的时候
        mobileToc.close()
      }
    })
  }</script><style></style><script>let setHeaderClass = () => {
    const nav = $('#navHeader');
    const navTop = nav.outerHeight();
    const winTop = $(window).scrollTop();
    if(winTop > navTop) {
      nav.addClass('header-bg-color');
    }
    else {
      nav.removeClass('header-bg-color');
    }
  };

  let scrollCollect = () => {
    return bamboo.throttle(function (e) {
      setHeaderClass();
    }, 200)()
  }

  let initHeaderBg = () => {
    setHeaderClass();
  }

  setHeaderClass();
  window.addEventListener('scroll', scrollCollect);

  document.addEventListener('pjax:send', function () {
    window.removeEventListener('scroll', scrollCollect)
  })
  document.addEventListener('pjax:complete', function () {
    window.addEventListener('scroll', scrollCollect);
    setHeaderClass();
  })</script><script>function loadIssuesJS(){0!=$(".post-detail").find(".issues-api").length&&loadScript("/js/issues/index.js")}$(function(){loadIssuesJS()}),document.addEventListener("pjax:complete",function(){"undefined"==typeof IssuesAPI&&loadIssuesJS()})</script><script>function loadPhotoOnlineJS(){0!=$(".post-detail").find(".getJsonPhoto-api").length&&loadScript("/js/getPhotoOnline/index.js")}$(function(){loadPhotoOnlineJS()}),document.addEventListener("pjax:complete",function(){"undefined"==typeof getPhotoJson&&loadPhotoOnlineJS()})</script><script>function loadTalkOnlineJS(){0!=$(".post-detail").find(".getJsonTalk-api").length&&(loadScript("https://cdnjs.cloudflare.com/ajax/libs/waterfall.js/1.0.2/waterfall.min.js"),loadScript("/js/getTalkOnline/index.js"))}$(function(){loadTalkOnlineJS()}),document.addEventListener("pjax:complete",function(){"undefined"==typeof getTalkJson&&loadTalkOnlineJS()})</script><script>function loadSiteOnlineJS(){0!=$(".post-detail").find(".getJsonSite-api").length&&loadScript("/js/getSiteOnline/index.js")}$(function(){loadSiteOnlineJS()}),document.addEventListener("pjax:complete",function(){"undefined"==typeof getSiteJson&&loadSiteOnlineJS()})</script><script src="/js/activate-power-mode.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="https://unpkg.com/v-plugs-ayu/lib/ayu.css"><script src="https://unpkg.com/v-plugs-ayu/lib/ayu.umd.min.js"></script><script src="/js/clipboard/clipboard.min.js"></script><div id="appCopy"></div><script data-pjax>var vm = new Vue({
      el: '#appCopy',
      data: {
      },
      computed: {
      },
      mounted() {
        const that = this;
        var copy = '复制';
        /* code */
        var initCopyCode = function () {
          var copyHtml = '';
          copyHtml += '<button class="btn-copy" data-clipboard-snippet="" style="position:absolute;top:0;right:0;z-index:1;">';
          copyHtml += '<i class="fas fa-copy"></i><span>' + copy + '</span>';
          copyHtml += '</button>';
          $(".post-detail pre").not('.gutter pre').wrap("<div class='codeBox' style='position:relative;width:100%;'></div>")
          $(".post-detail pre").not('.gutter pre').before(copyHtml);
          new ClipboardJS('.btn-copy', {
            target: function (trigger) {
              return trigger.nextElementSibling;
            }
          });
        }
        initCopyCode();
        $('.btn-copy').unbind('click').bind('click', function () {
          doSomething();
        })
        $(document).unbind('keypress').bind('keypress', function (e) {
          if (e.ctrlKey && e.keyCode == 67) {
            doSomething();
          }
        })

        function doSomething() {
          that.$notify({
            title: "成功",
            content: "代码已复制，请遵守相关授权协议。",
            type: 'success'
          })
        }
      },
      methods: {
      },
      created() { }
    })</script><script defer src="https://unpkg.com/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script><script>window.lazyLoadOptions={elements_selector:".lazyload",threshold:0},window.addEventListener("LazyLoad::Initialized",function(n){window.lazyLoadInstance=n.detail.instance},!1),document.addEventListener("DOMContentLoaded",function(){lazyLoadInstance.update()}),document.addEventListener("pjax:complete",function(){lazyLoadInstance.update()})</script><script src="/js/waline/waline.min.js"></script><script>var waline;comment_el="#waline-comment",loadWaline=function(){if($(comment_el).length){var e="https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo,https://cdn.jsdelivr.net/gh/walinejs/emojis/bilibili";e=e.split(","),waline=Waline({el:comment_el,serverURL:"https://ymx.ddns.net/",lang:"zh-CN",vistor:"",emoji:e,login:"enable",pageSize:"10",copyright:!0})}},$(document).ready(loadWaline),document.addEventListener("pjax:complete",function(){loadWaline()})</script><script async src="/js/cursor/clicklove.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" data-pjax></script><script>var bambooSwiperTag = {};
  function load_swiper() {
    if (!document.querySelectorAll(".post-swiper-container")[0]) return;
    loadCSS("https://unpkg.com/swiper@6/swiper-bundle.min.css")
    loadScript("https://unpkg.com/swiper@6/swiper-bundle.min.js").then(() => {
      pjax_swiper();
    });
  }

  load_swiper();

  function pjax_swiper() {
    bambooSwiperTag.swiper = new Swiper('.post-swiper-container', {
      slidesPerView: 'auto',
      spaceBetween: 8,
      centeredSlides: true,
      loop: true,
      autoplay: true ? {
        delay: 3000,
        stopOnLastSlide: false,
        disableOnInteraction: false,
      } : false,
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      on:{
        init: function(){
          swiperAnimateCache(this); //隐藏动画元素 
          swiperAnimate(this); //初始化完成开始动画
        }, 
        slideChangeTransitionEnd: function(){ 
          swiperAnimate(this); //每个slide切换结束时也运行当前slide动画
          //this.slides.eq(this.activeIndex).find('.ani').removeClass('ani'); 动画只展现一次，去除ani类名
        } 
      }
    });
  }

  document.addEventListener('pjax:complete', function () {
    if (!document.querySelectorAll(".post-swiper-container")[0]) return;
    if (typeof bambooSwiperTag.swiper === "undefined") {
      load_swiper();
    } else {
      pjax_swiper();
    }
  });</script><script src="/js/pjax@0.2.8/index.js"></script><div class="pjax-animate"><div class="loading-circle"><div id="loader-circle"></div></div><script>window.ShowLoading=function(){$(".loading-circle").css("display","block")},window.HideLoading=function(){$(".loading-circle").css("display","none")}</script><script>document.addEventListener("pjax:complete",function(){window.HideLoading()}),document.addEventListener("pjax:send",function(){window.ShowLoading()}),document.addEventListener("pjax:error",function(){window.HideLoading()})</script></div><script>var pjax = new Pjax({
      elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([no-pjax])',   // 拦截正常带链接的 a 标签
      selectors: ["#pjax-container","title"],                                   // 根据实际需要确认重载区域
      cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
      timeout: 5000
    });

    document.addEventListener('pjax:send', function (e) {

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = [""];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      $(window).unbind('resize');
      $(window).unbind('scroll');
      $(document).unbind('scroll');
      $(document).unbind('click');
      $('body').unbind('click');

    })
    
    document.addEventListener('pjax:complete', function () {
      $('script[data-pjax], .pjax-reload script').each(function () {
        $(this).parent().append($(this).remove());
      });
    });

    document.addEventListener('pjax:error', function (e) {
      window.location.href = e.triggerElement.href;
    })
    
    // 刷新不从顶部开始
    document.addEventListener("DOMContentLoaded", function () {
      history.scrollRestoration = 'auto';
    })</script></body></html>