{
    "version": "https://jsonfeed.org/version/1",
    "title": "叶泯希·杂七杂八的🐕窝 • All posts by \"dns\" tag",
    "description": "叶泯希的个人博客,yeminxiblog",
    "home_page_url": "https://yeminxi.github.io",
    "items": [
        {
            "id": "https://yeminxi.github.io/posts/974b3ed7.html",
            "url": "https://yeminxi.github.io/posts/974b3ed7.html",
            "title": "第五章 Centos 7 Linux配置dns 实训任务：部署DNS服务器",
            "date_published": "2024-05-28T04:32:51.000Z",
            "content_html": "<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>虚拟机需求：1台服务器（Server）、1台客户端（Client1）</p>\n<blockquote>\n<p><strong>在第四章的基础上继续实训</strong></p>\n</blockquote>\n<h2 id=\"部署DNS服务器\"><a href=\"#部署DNS服务器\" class=\"headerlink\" title=\"部署DNS服务器\"></a>部署DNS服务器</h2><blockquote>\n<h3 id=\"任务情境描述\"><a href=\"#任务情境描述\" class=\"headerlink\" title=\"任务情境描述\"></a>任务情境描述</h3><p>某公司要求在内部网络部署DNS服务器，用内部DNS服务器为内部网络中的计算机提供内部网络和Internet的域名解析服务。</p>\n</blockquote>\n<h3 id=\"网络拓扑图如下：\"><a href=\"#网络拓扑图如下：\" class=\"headerlink\" title=\"网络拓扑图如下：\"></a>网络拓扑图如下：</h3><p><img src=\"https://ymxpic.pages.dev/file/9a3bf5e11c452db3f7c9d.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/9a3bf5e11c452db3f7c9d.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<blockquote>\n<h3 id=\"环境说明：\"><a href=\"#环境说明：\" class=\"headerlink\" title=\"环境说明：\"></a>环境说明：</h3><p>（1） server安装CentOS 7基础设施服务器</p>\n<p>（2） client安装CentOS 7桌面环境</p>\n<p>（3） server、client均已配置网络和主机名（配置了第四章就不用配置了）</p>\n</blockquote>\n<blockquote>\n<h3 id=\"部署信息如下：\"><a href=\"#部署信息如下：\" class=\"headerlink\" title=\"部署信息如下：\"></a>部署信息如下：</h3><p>（1） 公司的DNS域名为 ymx.com（或自己命名）&#x2F;&#x2F;这里我用了自己的，用老师的是myhost.com下面表格也要跟着改</p>\n<p>（2） 名称解释要求如下表所示：</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>角色</th>\n<th>主机名</th>\n<th>IP地址</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Web服务器</td>\n<td><a href=\"http://www.ymx.com/\">www.ymx.com</a></td>\n<td>192.168.1.100</td>\n<td></td>\n</tr>\n<tr>\n<td>FTP服务器</td>\n<td>ftp.ymx.com</td>\n<td>192.168.1.100</td>\n<td>配置别名记录</td>\n</tr>\n<tr>\n<td>邮件服务器</td>\n<td>mail.ymx.com</td>\n<td>192.168.1.200</td>\n<td>配置相应的交换记录</td>\n</tr>\n<tr>\n<td>DNS服务器</td>\n<td>dns.ymx.com</td>\n<td>192.168.1.10</td>\n<td>DNS服务器</td>\n</tr>\n</tbody></table>\n<blockquote>\n<h3 id=\"任务1（用前面的就不用重新配置了）\"><a href=\"#任务1（用前面的就不用重新配置了）\" class=\"headerlink\" title=\"任务1（用前面的就不用重新配置了）\"></a>任务1（用前面的就不用重新配置了）</h3><p>根据上图中的网络图谱配置实训环境</p>\n<p>（1） 修改计算机名</p>\n<p>（2） 配置网络</p>\n<p>（3）开启防火墙，添加对应的服务</p>\n</blockquote>\n<blockquote>\n<h3 id=\"任务2\"><a href=\"#任务2\" class=\"headerlink\" title=\"任务2\"></a>任务2</h3><p>在server1上安装DNS服务，并将其配置为主DNS服务器</p>\n<p>（1） 安装DNS服务</p>\n<p>（2） 创建正向查找区域，并根据上表提供的信息在区域中添加资源记录；<br>          创建反向查找区域，并根据上表提供的信息在区域中添加资源记录；</p>\n<p>（3） 检查区域数据文件语法错误</p>\n<p>（4） 启动&#x2F;重启DNS服务</p>\n<p>（5） 开启防火墙，添加对应的服务</p>\n</blockquote>\n<blockquote>\n<h3 id=\"任务3\"><a href=\"#任务3\" class=\"headerlink\" title=\"任务3\"></a>任务3</h3><p>使用client对主DNS服务器进行测试</p>\n<p>（1） client网络配置</p>\n<p>（2） 在客户端执行DNS域名查询测试，对主&#x2F;辅DNS均进行域名查询测试（可使用命令指令使用主NDS或服务DNS进行查询）</p>\n</blockquote>\n<h2 id=\"一、在服务器（Server）上安装DNS服务\"><a href=\"#一、在服务器（Server）上安装DNS服务\" class=\"headerlink\" title=\"一、在服务器（Server）上安装DNS服务\"></a>一、在服务器（Server）上安装DNS服务</h2><h3 id=\"1-确保良好的网络连接也要保证设备的联网\"><a href=\"#1-确保良好的网络连接也要保证设备的联网\" class=\"headerlink\" title=\"1. 确保良好的网络连接也要保证设备的联网\"></a>1. 确保良好的网络连接也要保证设备的联网</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list installed | grep bind \t\t\t\t\\\\查看是否安装了dns服务</span><br><span class=\"line\">yum -y install bind\t\t\t\t\t\t\t\\\\安装dns服务</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/5ecdc267b84b5e1eecf9b.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/5ecdc267b84b5e1eecf9b.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h3 id=\"2-启动服务\"><a href=\"#2-启动服务\" class=\"headerlink\" title=\"2. 启动服务\"></a>2. 启动服务</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start named\t\t<span class=\"comment\">//启动dns服务</span></span><br><span class=\"line\">systemctl enable named\t\t<span class=\"comment\">//开机自启dns服务</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/b0450986f32adae814627.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/b0450986f32adae814627.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\" alt=\"2\"></p>\n<h3 id=\"3-防火墙配置\"><a href=\"#3-防火墙配置\" class=\"headerlink\" title=\"3. 防火墙配置\"></a>3. 防火墙配置</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-port=<span class=\"number\">53</span>/tcp\t<span class=\"comment\">//开启53端口</span></span><br><span class=\"line\">firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-port=<span class=\"number\">53</span>/udp</span><br><span class=\"line\">firewall-cmd --reload\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//重启防火墙</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/39be9522b5ad2f238d32f.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/39be9522b5ad2f238d32f.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"二、在服务器（Server）上配置dns服务\"><a href=\"#二、在服务器（Server）上配置dns服务\" class=\"headerlink\" title=\"二、在服务器（Server）上配置dns服务\"></a>二、在服务器（Server）上配置dns服务</h2><h3 id=\"1-配置全局服务实现高速缓存\"><a href=\"#1-配置全局服务实现高速缓存\" class=\"headerlink\" title=\"1.配置全局服务实现高速缓存\"></a>1.配置全局服务实现高速缓存</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/named.conf\t\t<span class=\"comment\">//打开配置文件进行如下修改</span></span><br><span class=\"line\">named-checkconf\t\t\t<span class=\"comment\">//检查语法</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/86b0e18dd3c088a584d48.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/86b0e18dd3c088a584d48.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listen-on port 53 &#123; any; &#125;;\t\t\t\t\t\t\t//改为any，named监听所有IP地址</span><br><span class=\"line\">allow-query     &#123; any; &#125;;\t\t\t\t\t\t\t//改为any，接受所有客户端的查询</span><br><span class=\"line\">forwarders      &#123;202.96.128.86;202.96.128.166;&#125;;\t//添加该项，配置转发器</span><br><span class=\"line\">dnssec-enable no;\t\t\t\t\t\t\t\t\t//改为no，禁用dnssec</span><br><span class=\"line\">dnssec-validation no;\t\t\t\t\t\t\t\t</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/f8db812aa6e49d4dc1883.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/f8db812aa6e49d4dc1883.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<blockquote>\n<p>检查语法发现错误，是因为我第22行打错单词了，重新编辑改回去就不报错了。</p>\n</blockquote>\n<h3 id=\"2-创建定义DNS服务器正向、反向查找区域\"><a href=\"#2-创建定义DNS服务器正向、反向查找区域\" class=\"headerlink\" title=\"2. 创建定义DNS服务器正向、反向查找区域\"></a>2. 创建定义DNS服务器正向、反向查找区域</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/named.conf\t\t<span class=\"comment\">//打开配置文件进行如下修改</span></span><br><span class=\"line\">named-checkconf\t\t\t<span class=\"comment\">//检查语法</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/4b50564b4ea5063d89f52.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/4b50564b4ea5063d89f52.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zone &quot;ymx.com&quot; IN &#123;\t\t\t\t\t\t\t//DNS域名</span><br><span class=\"line\">        type master;\t\t\t\t\t\t//区域类型为主要区域</span><br><span class=\"line\">        file &quot;ymx.com.zone&quot;;\t\t\t\t//区域数据存储文件名，位置默认为 /var/named 目录</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">zone &quot;1.168.192.in-addr.arpa&quot; IN &#123;\t\t\t//子网地址需要反写，后缀是固定的</span><br><span class=\"line\">        type master;\t\t\t\t\t\t//区域类型为主要区域</span><br><span class=\"line\">        file &quot;1.168.192.zone&quot;;\t\t\t\t//区域数据存储文件名，位置默认为 /var/named 目录</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>如是按照题目（myhost.com）来的话如下:</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zone &quot;myhost.com&quot; IN &#123;\t\t\t\t\t\t\t//DNS域名</span><br><span class=\"line\">        type master;\t\t\t\t\t\t//区域类型为主要区域</span><br><span class=\"line\">        file &quot;myhost.com.zone&quot;;\t\t\t\t//区域数据存储文件名，位置默认为 /var/named 目录</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">zone &quot;1.168.192.in-addr.arpa&quot; IN &#123;\t\t\t//子网地址需要反写，后缀是固定的</span><br><span class=\"line\">        type master;\t\t\t\t\t\t//区域类型为主要区域</span><br><span class=\"line\">        file &quot;1.168.192.zone&quot;;\t\t\t\t//区域数据存储文件名，位置默认为 /var/named 目录</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-创建区域数据文件\"><a href=\"#3-创建区域数据文件\" class=\"headerlink\" title=\"3. 创建区域数据文件\"></a>3. 创建区域数据文件</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /<span class=\"keyword\">var</span>/named</span><br><span class=\"line\">cp -a named.localhost ymx.com.zone\t\t<span class=\"comment\">//创建正向区域数据文件</span></span><br><span class=\"line\">cp -a named.loopback <span class=\"number\">1.168</span><span class=\"number\">.192</span>.zone\t\t<span class=\"comment\">//创建反向区域数据文件</span></span><br><span class=\"line\">systemctl restart named\t\t\t\t\t<span class=\"comment\">//重启dns服务</span></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>如是按照题目（myhost.com）来的话如下:</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /<span class=\"keyword\">var</span>/named</span><br><span class=\"line\">cp -a named.localhost myhost.com.zone\t<span class=\"comment\">//创建正向区域数据文件</span></span><br><span class=\"line\">cp -a named.loopback <span class=\"number\">1.168</span><span class=\"number\">.192</span>.zone\t\t<span class=\"comment\">//创建反向区域数据文件</span></span><br><span class=\"line\">systemctl restart named\t\t\t\t\t<span class=\"comment\">//重启dns服务</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"4-编辑正向区域数据文件\"><a href=\"#4-编辑正向区域数据文件\" class=\"headerlink\" title=\"4. 编辑正向区域数据文件\"></a>4. 编辑正向区域数据文件</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim ymx.com.zone\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//编辑正向区域数据</span></span><br><span class=\"line\">named-checkzone ymx.com.zone  /<span class=\"keyword\">var</span>/named/ymx.com.zone\t<span class=\"comment\">//检查语法</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/2c79ad9474f20745df0c5.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/2c79ad9474f20745df0c5.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$TTL 1D</span><br><span class=\"line\">@       IN SOA  dns ymx.com. (\t\t\t\t\t\t\t\t\t//区域授权服务器</span><br><span class=\"line\">                                        0       ; serial</span><br><span class=\"line\">                                        1D      ; refresh</span><br><span class=\"line\">                                        1H      ; retry</span><br><span class=\"line\">                                        1W      ; expire</span><br><span class=\"line\">                                        3H )    ; minimum</span><br><span class=\"line\">        NS      dns</span><br><span class=\"line\">dns     A       192.168.1.10\t\t\t\t\t\t\t\t\t//名称服务器记录</span><br><span class=\"line\">www     A       192.168.1.100\t\t\t\t\t\t\t\t\t//主机记录</span><br><span class=\"line\">mail    A       192.168.1.200</span><br><span class=\"line\">ftp     CNAME   www\t\t\t\t\t\t\t\t\t\t\t\t//别名记录</span><br><span class=\"line\">mail    MX 10   mail\t\t\t\t\t\t\t\t\t\t\t//邮箱交换器记录</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>如是按照题目（myhost.com）来的话如下:</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim myhost.com.zone\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//编辑正向区域数据</span></span><br><span class=\"line\">named-checkzone myhost.com.zone  /<span class=\"keyword\">var</span>/named/myhost.com.zone\t<span class=\"comment\">//检查语法</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$TTL 1D</span><br><span class=\"line\">@       IN SOA  server myhost.com. (\t\t\t\t\t\t\t\t\t//区域授权服务器</span><br><span class=\"line\">                                        0       ; serial</span><br><span class=\"line\">                                        1D      ; refresh</span><br><span class=\"line\">                                        1H      ; retry</span><br><span class=\"line\">                                        1W      ; expire</span><br><span class=\"line\">                                        3H )    ; minimum</span><br><span class=\"line\">        NS      server</span><br><span class=\"line\">server  A       192.168.1.10\t\t\t\t\t\t\t\t\t//名称服务器记录</span><br><span class=\"line\">www     A       192.168.1.100\t\t\t\t\t\t\t\t\t//主机记录</span><br><span class=\"line\">mail    A       192.168.1.200</span><br><span class=\"line\">ftp     CNAME   www\t\t\t\t\t\t\t\t\t\t\t\t//别名记录</span><br><span class=\"line\">mail    MX 10   mail\t\t\t\t\t\t\t\t\t\t\t//邮箱交换器记录</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/d959c88b2a0ba4d313c6d.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/d959c88b2a0ba4d313c6d.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h3 id=\"5-编辑反向区域数据文件\"><a href=\"#5-编辑反向区域数据文件\" class=\"headerlink\" title=\"5. 编辑反向区域数据文件\"></a>5. 编辑反向区域数据文件</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim <span class=\"number\">1.168</span><span class=\"number\">.192</span>.zone \t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//编辑反向区域数据</span></span><br><span class=\"line\">named-checkzone <span class=\"number\">1.168</span><span class=\"number\">.192</span>.zone  /<span class=\"keyword\">var</span>/named/<span class=\"number\">1.168</span><span class=\"number\">.192</span>.zone\t<span class=\"comment\">//检查语法</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/0e74a1c1bf31a363b73fc.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/0e74a1c1bf31a363b73fc.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$TTL 1D</span><br><span class=\"line\">@       IN SOA  dns ymx.com. (\t\t\t\t\t\t\t\t//区域授权的DNS服务器</span><br><span class=\"line\">                                        0       ; serial</span><br><span class=\"line\">                                        1D      ; refresh</span><br><span class=\"line\">                                        1H      ; retry</span><br><span class=\"line\">                                        1W      ; expire</span><br><span class=\"line\">                                        3H )    ; minimum</span><br><span class=\"line\">        NS      dns\t\t\t\t\t\t\t\t\t\t\t//名称服务器记录</span><br><span class=\"line\">dns     A       192.168.1.10\t\t\t\t\t\t\t\t//指针记录</span><br><span class=\"line\">10      PTR     dns.ymx.com.</span><br><span class=\"line\">100     PTR     www.ymx.com.</span><br><span class=\"line\">100     PTR     ftp.ymx.com.</span><br><span class=\"line\">200     PTR     mail.ymx.com.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/85bd8de0c3edd41d5bf9c.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/85bd8de0c3edd41d5bf9c.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<blockquote>\n<p>如是按照题目（myhost.com）来的话如下:</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim <span class=\"number\">1.168</span><span class=\"number\">.192</span>.zone \t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//编辑反向区域数据</span></span><br><span class=\"line\">named-checkzone <span class=\"number\">1.168</span><span class=\"number\">.192</span>.zone  /<span class=\"keyword\">var</span>/named/<span class=\"number\">1.168</span><span class=\"number\">.192</span>.zone\t<span class=\"comment\">//检查语法</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$TTL 1D</span><br><span class=\"line\">@       IN SOA  server myhost.com. (\t\t\t\t\t\t\t//区域授权的DNS服务器</span><br><span class=\"line\">                                        0       ; serial</span><br><span class=\"line\">                                        1D      ; refresh</span><br><span class=\"line\">                                        1H      ; retry</span><br><span class=\"line\">                                        1W      ; expire</span><br><span class=\"line\">                                        3H )    ; minimum</span><br><span class=\"line\">        NS      server\t\t\t\t\t\t\t\t\t\t\t//名称服务器记录</span><br><span class=\"line\">server  A       192.168.1.10\t\t\t\t\t\t\t\t\t//指针记录</span><br><span class=\"line\">10      PTR     server.myhost.com.\t\t\t\t\t\t</span><br><span class=\"line\">100     PTR     www.myhost.com.</span><br><span class=\"line\">100     PTR     ftp.myhost.com.</span><br><span class=\"line\">200     PTR     mail.myhost.com.</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>若语法检查无错误<br><img src=\"https://ymxpic.pages.dev/file/224df854a0c755daf9fd2.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/224df854a0c755daf9fd2.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart named\t\t<span class=\"comment\">//重启dns服务，且无返回信息则成功</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/97139188680461f22a0fb.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/97139188680461f22a0fb.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"三、在客户端（Client1）上进行测试\"><a href=\"#三、在客户端（Client1）上进行测试\" class=\"headerlink\" title=\"三、在客户端（Client1）上进行测试\"></a>三、在客户端（Client1）上进行测试</h2><h3 id=\"1-重新获取\"><a href=\"#1-重新获取\" class=\"headerlink\" title=\"1. 重新获取\"></a>1. 重新获取</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dhclient -r\t\t\t\t\t\t<span class=\"comment\">//释放租约</span></span><br><span class=\"line\">dhclient\t\t\t\t\t\t<span class=\"comment\">//重新获取租约</span></span><br><span class=\"line\">tail /etc/resolv.conf\t\t\t<span class=\"comment\">//查看客户端使用的DNS服务器</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/c58f7e03dfb8e3bc9fabd.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/c58f7e03dfb8e3bc9fabd.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h3 id=\"2-nslookup非交互式操作\"><a href=\"#2-nslookup非交互式操作\" class=\"headerlink\" title=\"2. nslookup非交互式操作\"></a>2. nslookup非交互式操作</h3><h4 id=\"2-1-测试正向解析\"><a href=\"#2-1-测试正向解析\" class=\"headerlink\" title=\"2.1 测试正向解析\"></a>2.1 测试正向解析</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nslookup www.ymx.com</span><br><span class=\"line\">nslookup ftp.ymx.com</span><br><span class=\"line\">nslookup mail.ymx.com</span><br><span class=\"line\">nslookup www.baidu.com</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/bc4dce8064bee257697bd.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/bc4dce8064bee257697bd.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h4 id=\"2-2-测试反向解析\"><a href=\"#2-2-测试反向解析\" class=\"headerlink\" title=\"2.2 测试反向解析\"></a>2.2 测试反向解析</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nslookup <span class=\"number\">202.108</span><span class=\"number\">.22</span><span class=\"number\">.5</span></span><br><span class=\"line\">nslookup <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.10</span></span><br><span class=\"line\">nslookup <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.100</span></span><br><span class=\"line\">nslookup <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.200</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/bedfef08fa7af8e7af35e.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/bedfef08fa7af8e7af35e.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h3 id=\"3-nslookup交互式操作（知道就好不用做）\"><a href=\"#3-nslookup交互式操作（知道就好不用做）\" class=\"headerlink\" title=\"3. nslookup交互式操作（知道就好不用做）\"></a>3. nslookup交互式操作（知道就好不用做）</h3><h4 id=\"3-1-查看所有配置\"><a href=\"#3-1-查看所有配置\" class=\"headerlink\" title=\"3.1 查看所有配置\"></a>3.1 查看所有配置</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nslookup</span><br><span class=\"line\">set all</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/0d52dfe4f10aa0e388467.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/0d52dfe4f10aa0e388467.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h4 id=\"3-2-查询主机名www-ymx-com\"><a href=\"#3-2-查询主机名www-ymx-com\" class=\"headerlink\" title=\"3.2 查询主机名www.ymx.com\"></a>3.2 查询主机名<a href=\"http://www.ymx.com/\">www.ymx.com</a></h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">www.ymx.com</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/3db5d9ca1f855e5b61f8b.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/3db5d9ca1f855e5b61f8b.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h4 id=\"3-3-查询ymx-com区域授权记录\"><a href=\"#3-3-查询ymx-com区域授权记录\" class=\"headerlink\" title=\"3.3 查询ymx.com区域授权记录\"></a>3.3 查询ymx.com区域授权记录</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set type=soa</span><br><span class=\"line\">ymx.com</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/b4b78740bc024a8a81610.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/b4b78740bc024a8a81610.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h4 id=\"3-4-查询1-168-192-in-addr-arpa区域授权记录\"><a href=\"#3-4-查询1-168-192-in-addr-arpa区域授权记录\" class=\"headerlink\" title=\"3.4 查询1.168.192.in-addr.arpa区域授权记录\"></a>3.4 查询1.168.192.in-addr.arpa区域授权记录</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.168</span><span class=\"number\">.192</span>.in-addr.arpa</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/cde1584ef3d609a9520df.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/cde1584ef3d609a9520df.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h4 id=\"3-5-查询邮箱交换器记录\"><a href=\"#3-5-查询邮箱交换器记录\" class=\"headerlink\" title=\"3.5 查询邮箱交换器记录\"></a>3.5 查询邮箱交换器记录</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set type=mx</span><br><span class=\"line\">ymx.com</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/663745b9f94e4326cad32.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/663745b9f94e4326cad32.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h4 id=\"3-6-查询名称服务器记录\"><a href=\"#3-6-查询名称服务器记录\" class=\"headerlink\" title=\"3.6 查询名称服务器记录\"></a>3.6 查询名称服务器记录</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set type=ns</span><br><span class=\"line\">ymx.com</span><br><span class=\"line\"><span class=\"number\">1.168</span><span class=\"number\">.192</span>.in-addr.arpa</span><br><span class=\"line\">exit\t\t\t\t\t\t\t<span class=\"comment\">//退出</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/04bad564727027d52486b.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/04bad564727027d52486b.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"至此，实验结束。\"><a href=\"#至此，实验结束。\" class=\"headerlink\" title=\"至此，实验结束。\"></a>至此，实验结束。</h2>",
            "tags": [
                "服务器",
                "运维",
                "Linux",
                "CentOS",
                "网络",
                "DNS"
            ]
        }
    ]
}