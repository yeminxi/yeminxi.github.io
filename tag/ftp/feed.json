{
    "version": "https://jsonfeed.org/version/1",
    "title": "叶泯希·杂七杂八的🐕窝 • All posts by \"ftp\" tag",
    "description": "叶泯希的个人博客,yeminxiblog",
    "home_page_url": "https://yeminxi.github.io",
    "items": [
        {
            "id": "https://yeminxi.github.io/posts/2d95345a.html",
            "url": "https://yeminxi.github.io/posts/2d95345a.html",
            "title": "第七章 Centos 7 Linux配置ftp 实训任务1：FTP服务器加密传输",
            "date_published": "2024-05-28T05:31:51.000Z",
            "content_html": "<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p><em><strong>&#x3D;&#x3D;前面的DNS一定要成功才能做！！！&#x3D;&#x3D;</strong></em><br>虚拟机需求：1台DNS服务器（Server）、1台Web服务器（Ftp Server）、1台客户端（Client1）</p>\n<blockquote>\n<p><strong>在第五章的基础上继续实训</strong></p>\n</blockquote>\n<h2 id=\"FTP服务器加密传输\"><a href=\"#FTP服务器加密传输\" class=\"headerlink\" title=\"FTP服务器加密传输\"></a>FTP服务器加密传输</h2><blockquote>\n<p>任务情境描述<br>某公司在需要使用vsftpd搭建一台FTP服务器，用于web站点资料的更新和公司公用文件的存放。为了保证客户机和服务器之间传输数据的保密性和完整性，公司决定使用SSL&#x2F;TLS协议加固FTP服务器，客户机和服务器之间采用SSL&#x2F;TLS协议加密数据。</p>\n</blockquote>\n<h2 id=\"任务要求：\"><a href=\"#任务要求：\" class=\"headerlink\" title=\"任务要求：\"></a>任务要求：</h2><blockquote>\n<h3 id=\"1-禁止使用不安全的FTP，请使用“CA”证书颁发机构，颁发的证书，启用FTPS服务；\"><a href=\"#1-禁止使用不安全的FTP，请使用“CA”证书颁发机构，颁发的证书，启用FTPS服务；\" class=\"headerlink\" title=\"1. 禁止使用不安全的FTP，请使用“CA”证书颁发机构，颁发的证书，启用FTPS服务；\"></a>1. 禁止使用不安全的FTP，请使用“CA”证书颁发机构，颁发的证书，启用FTPS服务；</h3><pre><code>Country Name (2 letter code) [XX]:CN\n</code></pre>\n<p>State or Province Name (fullname) []:GD \t \t<br>Locality Name (eg, city) [Default City]:GuangZhou \t<br>    Organization Name (eg, company) [Default Company Ltd]:mydomain.com \t<br>    Organizational Unit Name (eg, section) []:Operations Departments \t<br>    Common Name (eg, your name or your server’s hostname)[]:ftp.mydomain.com</p>\n<h3 id=\"2-使用ftp-mydomian-com域名访问服务器；\"><a href=\"#2-使用ftp-mydomian-com域名访问服务器；\" class=\"headerlink\" title=\"2. 使用ftp.mydomian.com域名访问服务器；\"></a>2. 使用ftp.mydomian.com域名访问服务器；</h3><h3 id=\"3-用户webadmin，登录ftp服务器，根目录为-webdata-；\"><a href=\"#3-用户webadmin，登录ftp服务器，根目录为-webdata-；\" class=\"headerlink\" title=\"3. 用户webadmin，登录ftp服务器，根目录为&#x2F;webdata&#x2F;；\"></a>3. 用户webadmin，登录ftp服务器，根目录为&#x2F;webdata&#x2F;；</h3><h3 id=\"4-登录后限制在自己的根目录；\"><a href=\"#4-登录后限制在自己的根目录；\" class=\"headerlink\" title=\"4. 登录后限制在自己的根目录；\"></a>4. 登录后限制在自己的根目录；</h3><h3 id=\"5-允许WEB管理员上传和下载文件，但是禁止上传后缀名为-doc-docx-xlsx的文件；\"><a href=\"#5-允许WEB管理员上传和下载文件，但是禁止上传后缀名为-doc-docx-xlsx的文件；\" class=\"headerlink\" title=\"5. 允许WEB管理员上传和下载文件，但是禁止上传后缀名为.doc .docx .xlsx的文件；\"></a>5. 允许WEB管理员上传和下载文件，但是禁止上传后缀名为.doc .docx .xlsx的文件；</h3><h3 id=\"6-限制用户的下载最大速度为100kb-s；最大同一IP在线人数为2人；\"><a href=\"#6-限制用户的下载最大速度为100kb-s；最大同一IP在线人数为2人；\" class=\"headerlink\" title=\"6. 限制用户的下载最大速度为100kb&#x2F;s；最大同一IP在线人数为2人；\"></a>6. 限制用户的下载最大速度为100kb&#x2F;s；最大同一IP在线人数为2人；</h3><h3 id=\"7-用于通过工具或者浏览器下载的最大速度不超过100kb-s；\"><a href=\"#7-用于通过工具或者浏览器下载的最大速度不超过100kb-s；\" class=\"headerlink\" title=\"7.用于通过工具或者浏览器下载的最大速度不超过100kb&#x2F;s；\"></a>7.用于通过工具或者浏览器下载的最大速度不超过100kb&#x2F;s；</h3><h3 id=\"8-一个IP地址同时登陆的用户进程-人数不超过2人。\"><a href=\"#8-一个IP地址同时登陆的用户进程-人数不超过2人。\" class=\"headerlink\" title=\"8. 一个IP地址同时登陆的用户进程&#x2F;人数不超过2人。\"></a>8. 一个IP地址同时登陆的用户进程&#x2F;人数不超过2人。</h3></blockquote>\n<h2 id=\"一、配置Ftp服务器（Ftp-Server）的IP地址\"><a href=\"#一、配置Ftp服务器（Ftp-Server）的IP地址\" class=\"headerlink\" title=\"一、配置Ftp服务器（Ftp Server）的IP地址\"></a>一、配置Ftp服务器（Ftp Server）的IP地址</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BOOTPROTO=static</span><br><span class=\"line\">IPADDR=192.168.1.100</span><br><span class=\"line\">GATEWAY=192.168.1.2</span><br><span class=\"line\">NETMASK=255.255.255.0</span><br><span class=\"line\">DNS1=192.168.1.10</span><br><span class=\"line\">DNS2=202.96.128.86</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/b3c12c42b1a1943313648.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/b3c12c42b1a1943313648.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"二、-为Ftp服务器（Ftp-Server）安装vsftp服务\"><a href=\"#二、-为Ftp服务器（Ftp-Server）安装vsftp服务\" class=\"headerlink\" title=\"二、 为Ftp服务器（Ftp Server）安装vsftp服务\"></a>二、 为Ftp服务器（Ftp Server）安装vsftp服务</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install vsftpd\t<span class=\"comment\">//安装vsftp服务</span></span><br><span class=\"line\">systemctl start vsftpd\t<span class=\"comment\">//开启vsftp服务</span></span><br><span class=\"line\">systemctl enable vsftpd\t<span class=\"comment\">//开机自启</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/da457df601a02990e21fc.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/da457df601a02990e21fc.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"三、Ftp服务器（Ftp-Server）生成证书\"><a href=\"#三、Ftp服务器（Ftp-Server）生成证书\" class=\"headerlink\" title=\"三、Ftp服务器（Ftp Server）生成证书\"></a>三、Ftp服务器（Ftp Server）生成证书</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">创建目录[root<span class=\"meta\">@webserver</span> webserver]# mkdir /etc/ssl/serverkey</span><br><span class=\"line\">生成证书[root<span class=\"meta\">@webserver</span> webserver]# openssl req -x509 -nodes -keyout /etc/ssl/serverkey/vsftpd.pem -out /etc/ssl/serverkey/vsftpd.pem -days <span class=\"number\">365</span> -newkey rsa:<span class=\"number\">2048</span></span><br><span class=\"line\">Generating a <span class=\"number\">2048</span> bit RSA <span class=\"keyword\">private</span> key</span><br><span class=\"line\">................+++</span><br><span class=\"line\">.....+++</span><br><span class=\"line\">writing <span class=\"keyword\">new</span> <span class=\"title class_\">private</span> key to <span class=\"string\">&#x27;/etc/ssl/serverkey/vsftpd.pem&#x27;</span></span><br><span class=\"line\">-----</span><br><span class=\"line\">You are about to be asked to enter information that will be incorporated</span><br><span class=\"line\">into your certificate request.</span><br><span class=\"line\">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class=\"line\">There are quite a few fields but you can leave some blank</span><br><span class=\"line\">For some fields there will be a <span class=\"keyword\">default</span> value,</span><br><span class=\"line\">If you enter <span class=\"string\">&#x27;.&#x27;</span>, the field will be left blank.</span><br><span class=\"line\">-----</span><br><span class=\"line\">Country <span class=\"title function_\">Name</span> <span class=\"params\">(<span class=\"number\">2</span> letter code)</span> [CN]:</span><br><span class=\"line\">State or Province <span class=\"title function_\">Name</span> <span class=\"params\">(full name)</span> [China]:GD</span><br><span class=\"line\">Locality <span class=\"title function_\">Name</span> <span class=\"params\">(eg, city)</span> [GuangZhou]:</span><br><span class=\"line\">Organization <span class=\"title function_\">Name</span> <span class=\"params\">(eg, company)</span> [ymx.com]:</span><br><span class=\"line\">Organizational Unit <span class=\"title function_\">Name</span> <span class=\"params\">(eg, section)</span> []:Operations Departments</span><br><span class=\"line\">Common <span class=\"title function_\">Name</span> <span class=\"params\">(eg, your name or your server<span class=\"string\">&#x27;s hostname) []:ftp.ymx.com</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"params\">Email Address []:</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"params\">[root@webserver webserver]#</span></span></span><br></pre></td></tr></table></figure>\n<p>图片打反了 别按照图片 按上面的文本<br><img src=\"https://ymxpic.pages.dev/file/173428ff934d91c26fc94.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/173428ff934d91c26fc94.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"四、-Ftp服务器（Ftp-Server）防火墙设置\"><a href=\"#四、-Ftp服务器（Ftp-Server）防火墙设置\" class=\"headerlink\" title=\"四、 Ftp服务器（Ftp Server）防火墙设置\"></a>四、 Ftp服务器（Ftp Server）防火墙设置</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">允许ftp通过[root<span class=\"meta\">@webserver</span> webserver]# firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-service=ftp</span><br><span class=\"line\">success</span><br><span class=\"line\">允许端口通过[root<span class=\"meta\">@webserver</span> webserver]# firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-port=<span class=\"number\">990</span>/tcp</span><br><span class=\"line\">success</span><br><span class=\"line\">允许端口通过[root<span class=\"meta\">@webserver</span> webserver]# firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-port=<span class=\"number\">990</span>/udp</span><br><span class=\"line\">success</span><br><span class=\"line\">允许端口通过[root<span class=\"meta\">@webserver</span> webserver]# firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-port=<span class=\"number\">40000</span>-<span class=\"number\">50000</span>/tcp</span><br><span class=\"line\">success</span><br><span class=\"line\">允许端口通过[root<span class=\"meta\">@webserver</span> webserver]# firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-port=<span class=\"number\">40000</span>-<span class=\"number\">50000</span>/udp</span><br><span class=\"line\">success</span><br><span class=\"line\">重启防火墙[root<span class=\"meta\">@webserver</span> webserver]# firewall-cmd --reload </span><br><span class=\"line\">success</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/cb7bc5a7b1bc7e530010d.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/cb7bc5a7b1bc7e530010d.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"五、-Ftp服务器（Ftp-Server）配置vsftp文件\"><a href=\"#五、-Ftp服务器（Ftp-Server）配置vsftp文件\" class=\"headerlink\" title=\"五、 Ftp服务器（Ftp Server）配置vsftp文件\"></a>五、 Ftp服务器（Ftp Server）配置vsftp文件</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>\n<p>最后插入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssl_enable=yes</span><br><span class=\"line\">ssl_tlsv1=yes</span><br><span class=\"line\">ssl_sslv2=no</span><br><span class=\"line\">ssl_sslv3=no</span><br><span class=\"line\">rsa_private_key_file=/etc/ssl/serverkey/vsftpd.pem</span><br><span class=\"line\">rsa_cert_file=/etc/ssl/serverkey/vsftpd.pem</span><br><span class=\"line\">allow_anon_ssl=no</span><br><span class=\"line\">force_local_logins_ssl=yes</span><br><span class=\"line\">force_local_data_ssl=yes</span><br><span class=\"line\">pasv_min_port=40000</span><br><span class=\"line\">pasv_max_port=50000</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart vsftpd\t<span class=\"comment\">//重启</span></span><br></pre></td></tr></table></figure>\n<p>图片打错了请按照上面文本打<br><img src=\"https://ymxpic.pages.dev/file/7ffae0727a56d9d65892a.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/7ffae0727a56d9d65892a.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"><br><img src=\"https://ymxpic.pages.dev/file/9b2f1e351d05e8dcd8e28.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/9b2f1e351d05e8dcd8e28.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"六、创建用户和根目录以及虚拟用户（详情看学习通ftp虚拟用户章节-这里不做过多解释）\"><a href=\"#六、创建用户和根目录以及虚拟用户（详情看学习通ftp虚拟用户章节-这里不做过多解释）\" class=\"headerlink\" title=\"六、创建用户和根目录以及虚拟用户（详情看学习通ftp虚拟用户章节 这里不做过多解释）\"></a>六、创建用户和根目录以及虚拟用户（详情看学习通ftp虚拟用户章节 这里不做过多解释）</h2><p>看不懂去看ppt</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# useradd webadmin -s /sbin/nologin </span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# useradd admin -s /sbin/nologin  </span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# passwd --stdin webadmin </span><br><span class=\"line\">更改用户 webadmin 的密码 。</span><br><span class=\"line\">root</span><br><span class=\"line\">passwd：所有的身份验证令牌已经成功更新。</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# passwd --stdin admin</span><br><span class=\"line\">更改用户 admin 的密码 。</span><br><span class=\"line\">root</span><br><span class=\"line\">passwd：所有的身份验证令牌已经成功更新。</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# vim /etc/vsftpd/vusr.txt </span><br><span class=\"line\">webadmin</span><br><span class=\"line\">root</span><br><span class=\"line\">admin</span><br><span class=\"line\">root</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# mkdir -p /<span class=\"keyword\">var</span>/ftp/pub/ /webdata</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# chmod <span class=\"number\">777</span> /webdata</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# chown webadmin /<span class=\"keyword\">var</span>/ftp/pub/ /webdata</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# rpm -qf /usr/bin/db_load</span><br><span class=\"line\">libdb-utils-<span class=\"number\">5.3</span><span class=\"number\">.21</span>-<span class=\"number\">24.</span>el7.x86_64</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# db_load -T -t hash -f /etc/vsftpd/vusr.txt /etc/vsftpd/vusr.db</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# file /etc/vsftpd/vusr.db</span><br><span class=\"line\">/etc/vsftpd/vusr.db: Berkeley <span class=\"title function_\">DB</span> <span class=\"params\">(Hash, version <span class=\"number\">9</span>, <span class=\"keyword\">native</span> <span class=\"type\">byte</span>-order)</span></span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# chmod <span class=\"number\">600</span> /etc/vsftpd/vusr.*</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# cp -p /etc/pam.d/vsftpd /etc/pam.d/vsftpd-vusr</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# vim /etc/pam.d/vsftpd-vusr</span><br><span class=\"line\">auth       sufficient   /lib64/security/pam_userdb.so db=/etc/vsftpd/vusr</span><br><span class=\"line\">account    sufficient   /lib64/security/pam_userdb.so db=/etc/vsftpd/vusr</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# vim /etc/vsftpd/vsftpd.conf </span><br><span class=\"line\">local_enable=yes</span><br><span class=\"line\">chroot_local_user=yes</span><br><span class=\"line\">pam_service_name=vsftpd-vusr</span><br><span class=\"line\">guest_enable=yes</span><br><span class=\"line\">guest_username=webadmin</span><br><span class=\"line\">user_config_dir=/etc/vsftpd/vconfig</span><br><span class=\"line\">virtual_use_local_privs=yes</span><br><span class=\"line\">allow_writeable_chroot=yes</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# mkdir /etc/vsftpd/vconfig/</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# vim /etc/vsftpd/vconfig/webadmin</span><br><span class=\"line\">local_root=/webdata</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# vim /etc/vsftpd/vconfig/admin</span><br><span class=\"line\">local_root=/webdata</span><br><span class=\"line\">write_enable=no</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# setsebool -P ftpd_full_access on</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# systemctl restart vsftpd</span><br></pre></td></tr></table></figure>\n<h2 id=\"七、-使用域名登录要在Dns服务器（Dns-Server）上正反向加上一条（略过）\"><a href=\"#七、-使用域名登录要在Dns服务器（Dns-Server）上正反向加上一条（略过）\" class=\"headerlink\" title=\"七、 使用域名登录要在Dns服务器（Dns Server）上正反向加上一条（略过）\"></a>七、 使用域名登录要在Dns服务器（Dns Server）上正反向加上一条（略过）</h2><p><img src=\"https://ymxpic.pages.dev/file/204c48d07d06906775de2.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/204c48d07d06906775de2.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h2 id=\"八、任务需求后四项Ftp服务器（Ftp-Server）上修改配置文件\"><a href=\"#八、任务需求后四项Ftp服务器（Ftp-Server）上修改配置文件\" class=\"headerlink\" title=\"八、任务需求后四项Ftp服务器（Ftp Server）上修改配置文件\"></a>八、任务需求后四项Ftp服务器（Ftp Server）上修改配置文件</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#允许WEB管理员上传和下载文件，但是禁止上传后缀名为.doc .docx .xlsx的文件；</span><br><span class=\"line\">deny_file=&#123;*.doc,*.docx,*.xlsx&#125;</span><br><span class=\"line\">#限制用户的下载最大速度为100kb/s；用于通过工具或者浏览器下载的最大速度不超过100kb/s；人数为<span class=\"number\">2</span>人；</span><br><span class=\"line\">local_max_rate=<span class=\"number\">102400</span></span><br><span class=\"line\">#最大同一IP在线</span><br><span class=\"line\">max_per_ip=<span class=\"number\">2</span></span><br><span class=\"line\">#一个IP地址同时登陆的用户进程/人数不超过<span class=\"number\">2</span>人。</span><br><span class=\"line\">max_clients=<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart vsftpd</span><br></pre></td></tr></table></figure>\n<h2 id=\"九、客户端（client1）测试\"><a href=\"#九、客户端（client1）测试\" class=\"headerlink\" title=\"九、客户端（client1）测试\"></a>九、客户端（client1）测试</h2><h3 id=\"1-安装ftp服务和FileZilla\"><a href=\"#1-安装ftp服务和FileZilla\" class=\"headerlink\" title=\"1. 安装ftp服务和FileZilla\"></a>1. 安装ftp服务和FileZilla</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install epel-release</span><br><span class=\"line\">yum -y install filezilla</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://ymxpic.pages.dev/file/fa01511cce2858dc00271.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/fa01511cce2858dc00271.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n<h3 id=\"2-创建测试文件\"><a href=\"#2-创建测试文件\" class=\"headerlink\" title=\"2. 创建测试文件\"></a>2. 创建测试文件</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@client</span> server]# mkdir /home/server/test <span class=\"comment\">/*server是我的用户名，看情况来*/</span></span><br><span class=\"line\">[root<span class=\"meta\">@client</span> server]# chmod <span class=\"number\">777</span>  /home/server/test</span><br><span class=\"line\">[root<span class=\"meta\">@client</span> server]# cd /home/server/test/</span><br><span class=\"line\">[root<span class=\"meta\">@client</span> test]# vim test.txt</span><br><span class=\"line\">[root<span class=\"meta\">@client</span> test]# vim test.doc</span><br><span class=\"line\">[root<span class=\"meta\">@client</span> test]# vim test.docx</span><br><span class=\"line\">[root<span class=\"meta\">@client</span> test]# vim test.xlsx</span><br></pre></td></tr></table></figure>\n<h3 id=\"3-尝试域名带证书CA登录ftp\"><a href=\"#3-尝试域名带证书CA登录ftp\" class=\"headerlink\" title=\"3. 尝试域名带证书CA登录ftp\"></a>3. 尝试域名带证书CA登录ftp</h3><p><img src=\"https://ymxpic.pages.dev/file/cbc7ba60aae41fa13abc7.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/cbc7ba60aae41fa13abc7.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"><br><img src=\"https://ymxpic.pages.dev/file/9fefc4d3e02513f54f15f.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/9fefc4d3e02513f54f15f.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"><br><img src=\"https://ymxpic.pages.dev/file/45c7673c5fb3db94c02c4.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/45c7673c5fb3db94c02c4.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"><br>登录成功！</p>\n<h3 id=\"4-尝试禁止上传文件类型上传\"><a href=\"#4-尝试禁止上传文件类型上传\" class=\"headerlink\" title=\"4.  尝试禁止上传文件类型上传\"></a>4.  尝试禁止上传文件类型上传</h3><p><img src=\"https://ymxpic.pages.dev/file/1c3ebb110203217f2412e.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/1c3ebb110203217f2412e.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"><br>上传失败！</p>\n<h3 id=\"5-尝试下载文件\"><a href=\"#5-尝试下载文件\" class=\"headerlink\" title=\"5. 尝试下载文件\"></a>5. 尝试下载文件</h3><p><img src=\"https://ymxpic.pages.dev/file/9583e247ad1aa7c6720bc.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/9583e247ad1aa7c6720bc.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"><br>成功！</p>\n<h3 id=\"6-单IP多用户登录\"><a href=\"#6-单IP多用户登录\" class=\"headerlink\" title=\"6. 单IP多用户登录\"></a>6. 单IP多用户登录</h3><p><img src=\"https://ymxpic.pages.dev/file/6257891a3377c2add1e27.jpg\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/6257891a3377c2add1e27.jpg\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"><br>最多只能2个不能再多了！</p>\n<h2 id=\"至此，实验结束。\"><a href=\"#至此，实验结束。\" class=\"headerlink\" title=\"至此，实验结束。\"></a>至此，实验结束。</h2>",
            "tags": [
                "服务器",
                "Linux",
                "CentOS",
                "网络",
                "FTP"
            ]
        }
    ]
}