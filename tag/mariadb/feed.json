{
    "version": "https://jsonfeed.org/version/1",
    "title": "叶泯希·杂七杂八的🐕窝 • All posts by \"mariadb\" tag",
    "description": "叶泯希的个人博客,yeminxiblog",
    "home_page_url": "https://yeminxi.github.io",
    "items": [
        {
            "id": "https://yeminxi.github.io/posts/660d7bf6.html",
            "url": "https://yeminxi.github.io/posts/660d7bf6.html",
            "title": "第八章 Centos 7 Linux配置mariadb 实训任务：部署数据库",
            "date_published": "2024-05-28T05:51:51.000Z",
            "content_html": "<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>虚拟机需求：1台服务器（Server）192.168.1.10、1台客户端（Client1）192.168.1.100</p>\n<h2 id=\"部署数据库\"><a href=\"#部署数据库\" class=\"headerlink\" title=\"部署数据库\"></a>部署数据库</h2><h3 id=\"任务情境描述\"><a href=\"#任务情境描述\" class=\"headerlink\" title=\"任务情境描述\"></a>任务情境描述</h3><h4 id=\"任务一\"><a href=\"#任务一\" class=\"headerlink\" title=\"任务一\"></a>任务一</h4><blockquote>\n<p>某公司准备开发一套员工管理系统，其中数据库使用到了MariaDB数据库，现需要系统管理员完成以下部署工作：在公司一台Linux服务器（192.168.1.10）上安装数据库服务器和客户端，方便开发人员开发测试使用，在另一台Linux主机（192.168.1.100）上安装客户端；<br>对数据库进行初始化设置。</p>\n</blockquote>\n<h4 id=\"任务二\"><a href=\"#任务二\" class=\"headerlink\" title=\"任务二\"></a>任务二</h4><blockquote>\n<p>该公司准备开发一套新员工管理系统，现需要系统管理员完成以下安全管理工作：</p>\n<ol>\n<li><p>对数据库服务器进行必要的网络安全设置，只允许从公司内部网络（192.168.1.0&#x2F;24）访问数据库服务器；</p>\n</li>\n<li><p>从安全的角度对数据库的配置文件进行必要的安全设置，修改数据库端口号为“8800”，并设置日志文件为&#x2F;var&#x2F;log&#x2F;mariaDB&#x2F;access.log</p>\n</li>\n<li><p>登录数据库，并新建一个名为newstaff的数据库；在数据库中创建一个数据表为stafftable；字段类型为staff int，username varchar(20)，sex char(6)，age<br>int；并将下表中的总公司部门员工信息插入到stafftable表中：<img src=\"https://ymxpic.pages.dev/file/a238c4a03ba3d4b9e5f31.png\" class=\"lazyload placeholder\" data-srcset=\"https://ymxpic.pages.dev/file/a238c4a03ba3d4b9e5f31.png\" srcset=\"https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp\"></p>\n</li>\n<li><p>对数据库账户和权限进行必要的管理，为开发人员创建一个名为“adminDB”的账户，但只允许他对newstaff数据库进行必要的操作；</p>\n</li>\n<li><p>为有效保护员工数据，编写一个定时任务，让系统每天凌晨0:00点对newstaff数据库自动进行数据备份。</p>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"一、-服务器（Server）和客户端（Client1）安装数据库服务\"><a href=\"#一、-服务器（Server）和客户端（Client1）安装数据库服务\" class=\"headerlink\" title=\"一、 服务器（Server）和客户端（Client1）安装数据库服务\"></a>一、 服务器（Server）和客户端（Client1）安装数据库服务</h2><h3 id=\"1-服务器（Server）\"><a href=\"#1-服务器（Server）\" class=\"headerlink\" title=\"1. 服务器（Server）\"></a>1. 服务器（Server）</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@server</span> www]# yum -y install mariadb-server mysql\t<span class=\"comment\">//安装</span></span><br><span class=\"line\">[root<span class=\"meta\">@server</span> www]# systemctl start mariadb.service \t\t<span class=\"comment\">//开启</span></span><br><span class=\"line\">[root<span class=\"meta\">@server</span> www]# systemctl enable mariadb.service \t<span class=\"comment\">//自启</span></span><br><span class=\"line\">Created symlink from /etc/systemd/system/multi-user.target.wants/mariadb.service to /usr/lib/systemd/system/mariadb.service.</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-客户端（Client1）\"><a href=\"#2-客户端（Client1）\" class=\"headerlink\" title=\"2. 客户端（Client1）\"></a>2. 客户端（Client1）</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# yum -y install mysql\t\t<span class=\"comment\">//安装</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"二、在服务器（Server）创建数据库和表\"><a href=\"#二、在服务器（Server）创建数据库和表\" class=\"headerlink\" title=\"二、在服务器（Server）创建数据库和表\"></a>二、在服务器（Server）创建数据库和表</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@server</span> www]# mysql -uroot -p\t\t<span class=\"comment\">//登录数据库 默认密码应该是root或空</span></span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MariaDB monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MariaDB connection id is <span class=\"number\">6</span></span><br><span class=\"line\">Server version: <span class=\"number\">5.5</span><span class=\"number\">.68</span>-MariaDB MariaDB Server</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">Copyright</span> <span class=\"params\">(c)</span> <span class=\"number\">2000</span>, <span class=\"number\">2018</span>, Oracle, MariaDB Corporation Ab and others.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> or <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; create database newstaff;\t\t\t<span class=\"comment\">//创建数据库newstaff</span></span><br><span class=\"line\">Query OK, <span class=\"number\">1</span> row <span class=\"title function_\">affected</span> <span class=\"params\">(<span class=\"number\">0.00</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; use newstaff;\t\t\t\t\t\t<span class=\"comment\">//进入数据库newstaff</span></span><br><span class=\"line\">Database changed</span><br><span class=\"line\">MariaDB [newstaff]&gt; create table <span class=\"title function_\">stafftable</span> <span class=\"params\">(\t\t//按任务需求创建表</span></span><br><span class=\"line\"><span class=\"params\">    -&gt; staffID <span class=\"type\">int</span> auto_increment,\t\t\t\t\t//自增</span></span><br><span class=\"line\"><span class=\"params\">    -&gt; username varchar(<span class=\"number\">20</span>)</span>,</span><br><span class=\"line\">    -&gt; sex <span class=\"title function_\">char</span><span class=\"params\">(<span class=\"number\">6</span>)</span>,</span><br><span class=\"line\">    -&gt; age <span class=\"type\">int</span>,</span><br><span class=\"line\">    -&gt; primary <span class=\"title function_\">key</span><span class=\"params\">(staffID)</span>\t\t\t\t\t\t\t<span class=\"comment\">//主键</span></span><br><span class=\"line\">    -&gt; )engine=innodb <span class=\"keyword\">default</span> charset=utf8;\t\t\t<span class=\"comment\">//表的引擎字符类型</span></span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> rows <span class=\"title function_\">affected</span> <span class=\"params\">(<span class=\"number\">0.02</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [newstaff]&gt; insert into <span class=\"title function_\">stafftable</span><span class=\"params\">(username,sex,age)</span> values(<span class=\"string\">&#x27;Tom&#x27;</span>,<span class=\"string\">&#x27;male&#x27;</span>,<span class=\"number\">25</span>),(<span class=\"string\">&#x27;Mary&#x27;</span>,<span class=\"string\">&#x27;female&#x27;</span>,<span class=\"number\">30</span>);\t\t\t\t\t\t\t\t</span><br><span class=\"line\">Query OK, <span class=\"number\">2</span> rows <span class=\"title function_\">affected</span> <span class=\"params\">(<span class=\"number\">0.05</span> sec)</span>\t\t\t\t<span class=\"comment\">//按要求插入数据</span></span><br><span class=\"line\">Records: <span class=\"number\">2</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [newstaff]&gt; desc stafftable;\t\t\t\t<span class=\"comment\">//查看表结构</span></span><br><span class=\"line\">+----------+-------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class=\"line\">+----------+-------------+------+-----+---------+----------------+</span><br><span class=\"line\">| staffID  | <span class=\"type\">int</span>(<span class=\"number\">11</span>)     | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| username | varchar(<span class=\"number\">20</span>) | YES  |     | NULL    |                |</span><br><span class=\"line\">| sex      | <span class=\"type\">char</span>(<span class=\"number\">6</span>)     | YES  |     | NULL    |                |</span><br><span class=\"line\">| age      | <span class=\"type\">int</span>(<span class=\"number\">11</span>)     | YES  |     | NULL    |                |</span><br><span class=\"line\">+----------+-------------+------+-----+---------+----------------+</span><br><span class=\"line\"><span class=\"number\">4</span> rows in <span class=\"title function_\">set</span> <span class=\"params\">(<span class=\"number\">0.00</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [newstaff]&gt; select * from stafftable;\t\t<span class=\"comment\">//查询表内所有数据</span></span><br><span class=\"line\">+---------+----------+--------+------+</span><br><span class=\"line\">| staffID | username | sex    | age  |</span><br><span class=\"line\">+---------+----------+--------+------+</span><br><span class=\"line\">|       <span class=\"number\">1</span> | Tom      | male   |   <span class=\"number\">25</span> |</span><br><span class=\"line\">|       <span class=\"number\">2</span> | Mary     | female |   <span class=\"number\">30</span> |</span><br><span class=\"line\">+---------+----------+--------+------+</span><br><span class=\"line\"><span class=\"number\">2</span> rows in <span class=\"title function_\">set</span> <span class=\"params\">(<span class=\"number\">0.01</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [newstaff]&gt; quit\t\t\t\t\t\t\t<span class=\"comment\">//退出</span></span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root<span class=\"meta\">@server</span> www]# </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"三、-服务器（Server）只允许192-168-1-0-24访问数据库\"><a href=\"#三、-服务器（Server）只允许192-168-1-0-24访问数据库\" class=\"headerlink\" title=\"三、 服务器（Server）只允许192.168.1.0&#x2F;24访问数据库\"></a>三、 服务器（Server）只允许192.168.1.0&#x2F;24访问数据库</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@server</span> www]# iptables -A INPUT -p tcp -s <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.0</span>/<span class=\"number\">24</span> --dport <span class=\"number\">8800</span> -j ACCEPT</span><br></pre></td></tr></table></figure>\n<h2 id=\"四、-修改服务器（Server）默认端口\"><a href=\"#四、-修改服务器（Server）默认端口\" class=\"headerlink\" title=\"四、 修改服务器（Server）默认端口\"></a>四、 修改服务器（Server）默认端口</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/my.cnf\t\t<span class=\"comment\">//插入以下</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">port=8800\t\t\t\t\t\t\t\t\t\t//修改默认端口</span><br><span class=\"line\">max_user_connections=2\t\t\t\t\t\t\t//最大用户数</span><br><span class=\"line\">log=/var/log/mariadb/access.log\t\t\t\t\t//修改日志默认路径</span><br><span class=\"line\">[mysqld_safe]</span><br></pre></td></tr></table></figure>\n\n<p>防火墙设置</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">允许mysql[root<span class=\"meta\">@server</span> www]# firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-service=mysql</span><br><span class=\"line\">success</span><br><span class=\"line\">允许端口[root<span class=\"meta\">@server</span> www]# firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-port=<span class=\"number\">8800</span>/tcp</span><br><span class=\"line\">success</span><br><span class=\"line\">允许端口[root<span class=\"meta\">@server</span> www]# firewall-cmd --permanent --zone=<span class=\"keyword\">public</span> --add-port=<span class=\"number\">8800</span>/udp</span><br><span class=\"line\">success</span><br><span class=\"line\">重启防火墙[root<span class=\"meta\">@server</span> www]# semanage port -l | grep mysql</span><br><span class=\"line\">mysqld_port_t                  tcp      <span class=\"number\">8800</span>, <span class=\"number\">1186</span>, <span class=\"number\">3306</span>, <span class=\"number\">63132</span>-<span class=\"number\">63164</span></span><br><span class=\"line\">mysqlmanagerd_port_t           tcp      <span class=\"number\">2273</span></span><br><span class=\"line\">[root<span class=\"meta\">@server</span> www]# semanage port -a -t mysqld_port_t -p tcp <span class=\"number\">8800</span></span><br><span class=\"line\">[root<span class=\"meta\">@server</span> www]# firewall-cmd --reload </span><br><span class=\"line\">success</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@server</span> www]# systemctl restart mariadb.service </span><br></pre></td></tr></table></figure>\n<h2 id=\"五、在服务器（Server）上创建账户只允许他对newstaff数据库进行操作\"><a href=\"#五、在服务器（Server）上创建账户只允许他对newstaff数据库进行操作\" class=\"headerlink\" title=\"五、在服务器（Server）上创建账户只允许他对newstaff数据库进行操作\"></a>五、在服务器（Server）上创建账户只允许他对newstaff数据库进行操作</h2><p>创建用户</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@server</span> www]# mysql -uroot -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MariaDB monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MariaDB connection id is <span class=\"number\">7</span></span><br><span class=\"line\">Server version: <span class=\"number\">5.5</span><span class=\"number\">.68</span>-MariaDB MariaDB Server</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">Copyright</span> <span class=\"params\">(c)</span> <span class=\"number\">2000</span>, <span class=\"number\">2018</span>, Oracle, MariaDB Corporation Ab and others.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> or <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; use mysql;</span><br><span class=\"line\">Reading table information <span class=\"keyword\">for</span> completion of table and column names</span><br><span class=\"line\">You can turn off <span class=\"built_in\">this</span> feature to get a quicker startup with -A</span><br><span class=\"line\"></span><br><span class=\"line\">Database changed</span><br><span class=\"line\">MariaDB [mysql]&gt; create user <span class=\"string\">&#x27;adminDB&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span> identified by <span class=\"string\">&#x27;root&#x27;</span>;  <span class=\"comment\">//设置用户名和密码root</span></span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> rows <span class=\"title function_\">affected</span> <span class=\"params\">(<span class=\"number\">0.00</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [mysql]&gt; quit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root<span class=\"meta\">@server</span> www]# </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>只允许对newstaff数据库进行操作</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@server</span> www]# mysql -uroot -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MariaDB monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MariaDB connection id is <span class=\"number\">8</span></span><br><span class=\"line\">Server version: <span class=\"number\">5.5</span><span class=\"number\">.68</span>-MariaDB MariaDB Server</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">Copyright</span> <span class=\"params\">(c)</span> <span class=\"number\">2000</span>, <span class=\"number\">2018</span>, Oracle, MariaDB Corporation Ab and others.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> or <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; show grants <span class=\"keyword\">for</span> <span class=\"string\">&#x27;adminDB&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">+----------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">| Grants <span class=\"keyword\">for</span> adminDB@%                                                                                   |</span><br><span class=\"line\">+----------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">| GRANT USAGE ON *.* TO <span class=\"string\">&#x27;adminDB&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED BY PASSWORD <span class=\"string\">&#x27;*81F5E21E35407D884A6CD4A731AEBFB6AF209E1B&#x27;</span> |</span><br><span class=\"line\">+----------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\"><span class=\"number\">1</span> row in <span class=\"title function_\">set</span> <span class=\"params\">(<span class=\"number\">0.00</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; grant select,insert,update,delete,create,drop on newstaff.* to <span class=\"string\">&#x27;adminDB&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span>;\t<span class=\"comment\">//只允许adminDB操作数据库newstaff</span></span><br><span class=\"line\">Query OK, <span class=\"number\">0</span> rows <span class=\"title function_\">affected</span> <span class=\"params\">(<span class=\"number\">0.01</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; quit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root<span class=\"meta\">@server</span> www]# </span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"六、编写备份程序（可略，老师好像不看）\"><a href=\"#六、编写备份程序（可略，老师好像不看）\" class=\"headerlink\" title=\"六、编写备份程序（可略，老师好像不看）\"></a>六、编写备份程序（可略，老师好像不看）</h2><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@server</span> www]# mysqldump -uroot -p newstaff &gt; newstaff_backup.sql\t\t<span class=\"comment\">//备份newstaff数据库</span></span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">[root<span class=\"meta\">@server</span> www]# cd ..</span><br><span class=\"line\">[root<span class=\"meta\">@server</span> <span class=\"keyword\">var</span>]# cd ..</span><br><span class=\"line\">[root<span class=\"meta\">@server</span> /]# vim backup.sh\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//编写程序</span></span><br><span class=\"line\">#!/bin/bash</span><br><span class=\"line\">time=`date+<span class=\"string\">&quot;(&quot;</span>%F<span class=\"string\">&quot;)&quot;</span>%R`</span><br><span class=\"line\">$/usr/local/mysql/bin/mysqldump -uroot -proot newstaff|gzip &gt; /root/staffbackup-$time.gz</span><br><span class=\"line\">[root<span class=\"meta\">@server</span> /]# crontab -e\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//添加定时任务</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">00 00 * * * /backup.sh\t\t\t\t\t\t\t\t\t\t\t\t\t\t//0点0分 每天 每月 每时 脚本路径</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab: installing <span class=\"keyword\">new</span> <span class=\"title class_\">crontab</span></span><br><span class=\"line\">[root<span class=\"meta\">@server</span> /]# systemcrl restart mariadb</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"七、-测试\"><a href=\"#七、-测试\" class=\"headerlink\" title=\"七、 测试\"></a>七、 测试</h2><p>老师一般说这几条命令，她叫你打什么就打什么吧</p>\n<h3 id=\"1-客户端（Client1）\"><a href=\"#1-客户端（Client1）\" class=\"headerlink\" title=\"1. 客户端（Client1）\"></a>1. 客户端（Client1）</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]# mysql -uadminDB -p -P8800 -h <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.10</span>\t<span class=\"comment\">//带端口登录</span></span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MariaDB monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MariaDB connection id is <span class=\"number\">8</span></span><br><span class=\"line\">Server version: <span class=\"number\">5.5</span><span class=\"number\">.68</span>-MariaDB MariaDB Server</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">Copyright</span> <span class=\"params\">(c)</span> <span class=\"number\">2000</span>, <span class=\"number\">2018</span>, Oracle, MariaDB Corporation Ab and others.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> or <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; use newstaff;</span><br><span class=\"line\">Reading table information <span class=\"keyword\">for</span> completion of table and column names</span><br><span class=\"line\">You can turn off <span class=\"built_in\">this</span> feature to get a quicker startup with -A</span><br><span class=\"line\"></span><br><span class=\"line\">Database changed</span><br><span class=\"line\">MariaDB [newstaff]&gt; desc stafftable;\t\t\t\t<span class=\"comment\">//查看表结构</span></span><br><span class=\"line\">+----------+-------------+------+-----+---------+----------------+</span><br><span class=\"line\">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class=\"line\">+----------+-------------+------+-----+---------+----------------+</span><br><span class=\"line\">| staffID  | <span class=\"type\">int</span>(<span class=\"number\">11</span>)     | NO   | PRI | NULL    | auto_increment |</span><br><span class=\"line\">| username | varchar(<span class=\"number\">20</span>) | YES  |     | NULL    |                |</span><br><span class=\"line\">| sex      | <span class=\"type\">char</span>(<span class=\"number\">6</span>)     | YES  |     | NULL    |                |</span><br><span class=\"line\">| age      | <span class=\"type\">int</span>(<span class=\"number\">11</span>)     | YES  |     | NULL    |                |</span><br><span class=\"line\">+----------+-------------+------+-----+---------+----------------+</span><br><span class=\"line\"><span class=\"number\">4</span> rows in <span class=\"title function_\">set</span> <span class=\"params\">(<span class=\"number\">0.00</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [newstaff]&gt; select * from stafftable;\t\t<span class=\"comment\">//查看表内容</span></span><br><span class=\"line\">+---------+----------+--------+------+</span><br><span class=\"line\">| staffID | username | sex    | age  |</span><br><span class=\"line\">+---------+----------+--------+------+</span><br><span class=\"line\">|       <span class=\"number\">1</span> | Tom      | male   |   <span class=\"number\">25</span> |</span><br><span class=\"line\">|       <span class=\"number\">2</span> | Mary     | female |   <span class=\"number\">30</span> |</span><br><span class=\"line\">+---------+----------+--------+------+</span><br><span class=\"line\"><span class=\"number\">2</span> rows in <span class=\"title function_\">set</span> <span class=\"params\">(<span class=\"number\">0.00</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [newstaff]&gt; quit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root<span class=\"meta\">@webserver</span> webserver]#</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-服务器（Server）\"><a href=\"#2-服务器（Server）\" class=\"headerlink\" title=\"2. 服务器（Server）\"></a>2. 服务器（Server）</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root<span class=\"meta\">@server</span> /]# mysql -uroot -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">Welcome to the MariaDB monitor.  Commands end with ; or \\g.</span><br><span class=\"line\">Your MariaDB connection id is <span class=\"number\">12</span></span><br><span class=\"line\">Server version: <span class=\"number\">5.5</span><span class=\"number\">.68</span>-MariaDB MariaDB Server</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">Copyright</span> <span class=\"params\">(c)</span> <span class=\"number\">2000</span>, <span class=\"number\">2018</span>, Oracle, MariaDB Corporation Ab and others.</span><br><span class=\"line\"></span><br><span class=\"line\">Type <span class=\"string\">&#x27;help;&#x27;</span> or <span class=\"string\">&#x27;\\h&#x27;</span> <span class=\"keyword\">for</span> help. Type <span class=\"string\">&#x27;\\c&#x27;</span> to clear the current input statement.</span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; show grants <span class=\"keyword\">for</span> <span class=\"string\">&#x27;adminDB&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span>;</span><br><span class=\"line\">+--------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">| Grants <span class=\"keyword\">for</span> adminDB@%                                                                                   |</span><br><span class=\"line\">+--------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\">| GRANT USAGE ON *.* TO <span class=\"string\">&#x27;adminDB&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span> IDENTIFIED BY PASSWORD <span class=\"string\">&#x27;*81F5E21E35407D884A6CD4A731AEBFB6AF209E1B&#x27;</span> |</span><br><span class=\"line\">| GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP ON `newstaff`.* TO <span class=\"string\">&#x27;adminDB&#x27;</span>@<span class=\"string\">&#x27;%&#x27;</span>                    |</span><br><span class=\"line\">+--------------------------------------------------------------------------------------------------------------------+</span><br><span class=\"line\"><span class=\"number\">2</span> rows in <span class=\"title function_\">set</span> <span class=\"params\">(<span class=\"number\">0.00</span> sec)</span></span><br><span class=\"line\"></span><br><span class=\"line\">MariaDB [(none)]&gt; quit</span><br><span class=\"line\">Bye</span><br><span class=\"line\">[root<span class=\"meta\">@server</span> /]#</span><br></pre></td></tr></table></figure>\n<h2 id=\"至此，实验结束。\"><a href=\"#至此，实验结束。\" class=\"headerlink\" title=\"至此，实验结束。\"></a>至此，实验结束。</h2>",
            "tags": [
                "数据库",
                "服务器",
                "Linux",
                "CentOS",
                "mariadb"
            ]
        }
    ]
}